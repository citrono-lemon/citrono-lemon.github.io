"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{4394:function(t,e,n){n.r(e),n.d(e,{Animation:function(){return E},AnimationState:function(){return O},AnimationStateAdapter:function(){return L},AnimationStateData:function(){return W},AtlasAttachmentLoader:function(){return Q},Attachment:function(){return h},AttachmentTimeline:function(){return R},Bone:function(){return U},BoneData:function(){return H},BoundingBoxAttachment:function(){return u},ClippingAttachment:function(){return f},ColorTimeline:function(){return T},ConstraintData:function(){return j},CurveTimeline:function(){return x},DeformTimeline:function(){return V},DrawOrderTimeline:function(){return P},Event:function(){return G},EventData:function(){return Z},EventQueue:function(){return q},EventTimeline:function(){return k},EventType:function(){return b},IkConstraint:function(){return z},IkConstraintData:function(){return J},IkConstraintTimeline:function(){return F},JitterEffect:function(){return v},MeshAttachment:function(){return d},PathAttachment:function(){return p},PathConstraint:function(){return $},PathConstraintData:function(){return K},PathConstraintMixTimeline:function(){return X},PathConstraintPositionTimeline:function(){return Y},PathConstraintSpacingTimeline:function(){return _},PointAttachment:function(){return m},RegionAttachment:function(){return g},RotateTimeline:function(){return w},ScaleTimeline:function(){return I},ShearTimeline:function(){return S},Skeleton:function(){return nt},SkeletonBinary:function(){return lt},SkeletonBounds:function(){return ut},SkeletonData:function(){return at},SkeletonJson:function(){return ft},Skin:function(){return st},SkinEntry:function(){return ot},Slot:function(){return tt},SlotData:function(){return rt},SpacingMode:function(){return B},Spine:function(){return pt},SwirlEffect:function(){return y},TimelineType:function(){return l},TrackEntry:function(){return D},TransformConstraint:function(){return et},TransformConstraintData:function(){return it},TransformConstraintTimeline:function(){return N},TranslateTimeline:function(){return M},TwoColorTimeline:function(){return A},VertexAttachment:function(){return c}});var a=n(4658),r=n(9658),i=n(1680),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function s(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var l,h=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t},c=function(t){function e(n){var a=t.call(this,n)||this;return a.id=(65535&e.nextID++)<<11,a.worldVerticesLength=0,a.deformAttachment=a,a}return s(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,n,a,r,i){n=r+(n>>1)*i;var o=t.bone.skeleton,s=t.deform,l=this.vertices,h=this.bones;if(null!=h){for(var c=0,u=0,f=0;f<e;f+=2){c+=(g=h[c])+1,u+=g}var d=o.bones;if(0==s.length)for(R=r,I=3*u;R<n;R+=i){var p=0,m=0,g=h[c++];for(g+=c;c<g;c++,I+=3){b=d[h[c]].matrix,C=l[I],V=l[I+1];var v=l[I+2];p+=(C*b.a+V*b.c+b.tx)*v,m+=(C*b.b+V*b.d+b.ty)*v}a[R]=p,a[R+1]=m}else for(var y=s,E=(R=r,I=3*u,u<<1);R<n;R+=i){p=0,m=0,g=h[c++];for(g+=c;c<g;c++,I+=3,E+=2){b=d[h[c]].matrix,C=l[I]+y[E],V=l[I+1]+y[E+1],v=l[I+2];p+=(C*b.a+V*b.c+b.tx)*v,m+=(C*b.b+V*b.d+b.ty)*v}a[R]=p,a[R+1]=m}}else{s.length>0&&(l=s);for(var b,x=(b=t.bone.matrix).tx,w=b.ty,M=b.a,I=b.c,S=b.b,T=b.d,A=e,R=r;R<n;A+=2,R+=i){var C=l[A],V=l[A+1];a[R]=C*M+V*I+x,a[R+1]=C*S+V*T+w}}},e.prototype.copyTo=function(t){null!=this.bones?(t.bones=new Array(this.bones.length),a.cQ.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=a.cQ.newFloatArray(this.vertices.length),a.cQ.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},e.nextID=0,e}(h),u=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.sf.BoundingBox,n.color=new a.Il(1,1,1,1),n}return s(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},e}(c),f=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.sf.Clipping,n.color=new a.Il(.2275,.2275,.8078,1),n}return s(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},e}(c),d=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.sf.Mesh,n.color=new a.Il(1,1,1,1),n.tempColor=new a.Il(0,0,0,0),n}return s(e,t),e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},e.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),a.cQ.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),a.cQ.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),a.cQ.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},e.prototype.newLinkedMesh=function(){var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},e}(c),p=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.sf.Path,n.closed=!1,n.constantSpeed=!1,n.color=new a.Il(1,1,1,1),n}return s(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),a.cQ.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},e}(c),m=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.sf.Point,n.color=new a.Il(.38,.94,0,1),n}return s(e,t),e.prototype.computeWorldPosition=function(t,e){var n=t.matrix;return e.x=this.x*n.a+this.y*n.c+t.worldX,e.y=this.x*n.b+this.y*n.d+t.worldY,e},e.prototype.computeWorldRotation=function(t){var e=t.matrix,n=a.M8.cosDeg(this.rotation),r=a.M8.sinDeg(this.rotation),i=n*e.a+r*e.c,o=n*e.b+r*e.d;return Math.atan2(o,i)*a.M8.radDeg},e.prototype.copy=function(){var t=new e(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},e}(c),g=function(t){function e(e){var n=t.call(this,e)||this;return n.type=a.sf.Region,n.x=0,n.y=0,n.scaleX=1,n.scaleY=1,n.rotation=0,n.width=0,n.height=0,n.color=new a.Il(1,1,1,1),n.offset=a.cQ.newFloatArray(8),n.uvs=a.cQ.newFloatArray(8),n.tempColor=new a.Il(1,1,1,1),n}return s(e,t),e.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,n=this.height/this.region.originalHeight*this.scaleY,a=-this.width/2*this.scaleX+this.region.offsetX*t,r=-this.height/2*this.scaleY+this.region.offsetY*n,i=a+this.region.width*t,o=r+this.region.height*n,s=this.rotation*Math.PI/180,l=Math.cos(s),h=Math.sin(s),c=a*l+this.x,u=a*h,f=r*l+this.y,d=r*h,p=i*l+this.x,m=i*h,g=o*l+this.y,v=o*h,y=this.offset;y[e.OX1]=c-d,y[e.OY1]=f+u,y[e.OX2]=c-v,y[e.OY2]=g+u,y[e.OX3]=p-v,y[e.OY3]=g+m,y[e.OX4]=p-d,y[e.OY4]=f+m},e.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},e.prototype.computeWorldVertices=function(t,n,a,r){var i=this.offset,o=t.matrix,s=o.tx,l=o.ty,h=o.a,c=o.c,u=o.b,f=o.d,d=0,p=0;d=i[e.OX1],p=i[e.OY1],n[a]=d*h+p*c+s,n[a+1]=d*u+p*f+l,a+=r,d=i[e.OX2],p=i[e.OY2],n[a]=d*h+p*c+s,n[a+1]=d*u+p*f+l,a+=r,d=i[e.OX3],p=i[e.OY3],n[a]=d*h+p*c+s,n[a+1]=d*u+p*f+l,a+=r,d=i[e.OX4],p=i[e.OY4],n[a]=d*h+p*c+s,n[a+1]=d*u+p*f+l},e.prototype.copy=function(){var t=new e(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,a.cQ.arrayCopy(this.uvs,0,t.uvs,0,8),a.cQ.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(h),v=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,n,r){t.x+=a.M8.randomTriangular(-this.jitterX,this.jitterY),t.y+=a.M8.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),y=function(){function t(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return t.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},t.prototype.transform=function(e,n,r,i){var o=this.angle*a.M8.degreesToRadians,s=e.x-this.worldX,l=e.y-this.worldY,h=Math.sqrt(s*s+l*l);if(h<this.radius){var c=t.interpolation.apply(0,o,(this.radius-h)/this.radius),u=Math.cos(c),f=Math.sin(c);e.x=u*s-f*l+this.worldX,e.y=f*s+u*l+this.worldY}},t.prototype.end=function(){},t.interpolation=new a.RN(2),t}(),E=function(){function t(t,e,n){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var a=0;a<e.length;a++)this.timelineIds[e[a].getPropertyId()]=!0;this.duration=n}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,n,a,r,i,o,s){if(null==t)throw new Error("skeleton cannot be null.");a&&0!=this.duration&&(n%=this.duration,e>0&&(e%=this.duration));for(var l=this.timelines,h=0,c=l.length;h<c;h++)l[h].apply(t,e,n,r,i,o,s)},t.binarySearch=function(t,e,n){void 0===n&&(n=1);var a=0,r=t.length/n-2;if(0==r)return n;for(var i=r>>>1;;){if(t[(i+1)*n]<=e?a=i+1:r=i,a==r)return(a+1)*n;i=a+r>>>1}},t.linearSearch=function(t,e,n){for(var a=0,r=t.length-n;a<=r;a+=n)if(t[a]>e)return a;return-1},t}();!function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(l||(l={}));var b,x=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=a.cQ.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var n=e*t.BEZIER_SIZE;if(n==this.curves.length)return t.LINEAR;var a=this.curves[n];return a==t.LINEAR?t.LINEAR:a==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,n,a,r,i){var o=.03*(2*-n+r),s=.03*(2*-a+i),l=.006*(3*(n-r)+1),h=.006*(3*(a-i)+1),c=2*o+l,u=2*s+h,f=.3*n+o+.16666667*l,d=.3*a+s+.16666667*h,p=e*t.BEZIER_SIZE,m=this.curves;m[p++]=t.BEZIER;for(var g=f,v=d,y=p+t.BEZIER_SIZE-1;p<y;p+=2)m[p]=g,m[p+1]=v,f+=c,d+=u,c+=l,u+=h,g+=f,v+=d},t.prototype.getCurvePercent=function(e,n){n=a.M8.clamp(n,0,1);var r=this.curves,i=e*t.BEZIER_SIZE,o=r[i];if(o==t.LINEAR)return n;if(o==t.STEPPED)return 0;for(var s=0,l=++i,h=i+t.BEZIER_SIZE-1;i<h;i+=2)if((s=r[i])>=n){var c=void 0,u=void 0;return i==l?(c=0,u=0):(c=r[i-2],u=r[i-1]),u+(r[i+1]-u)*(n-c)/(s-c)}var f=r[i-1];return f+(1-f)*(n-s)/(1-s)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=19,t}(),w=function(t){function e(e){var n=t.call(this,e)||this;return n.frames=a.cQ.newFloatArray(e<<1),n}return s(e,t),e.prototype.getPropertyId=function(){return(l.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(t,n,a){t<<=1,this.frames[t]=n,this.frames[t+e.ROTATION]=a},e.prototype.apply=function(t,n,r,i,o,s,l){var h=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<h[0])switch(s){case a.bq.setup:return void(c.rotation=c.data.rotation);case a.bq.first:var u=c.data.rotation-c.rotation;c.rotation+=(u-360*(16384-(16384.499999999996-u/360|0)))*o}else if(r>=h[h.length-e.ENTRIES]){var f=h[h.length+e.PREV_ROTATION];switch(s){case a.bq.setup:c.rotation=c.data.rotation+f*o;break;case a.bq.first:case a.bq.replace:f+=c.data.rotation-c.rotation,f-=360*(16384-(16384.499999999996-f/360|0));case a.bq.add:c.rotation+=f*o}}else{var d=E.binarySearch(h,r,e.ENTRIES),p=h[d+e.PREV_ROTATION],m=h[d],g=this.getCurvePercent((d>>1)-1,1-(r-m)/(h[d+e.PREV_TIME]-m)),v=h[d+e.ROTATION]-p;switch(v=p+(v-360*(16384-(16384.499999999996-v/360|0)))*g,s){case a.bq.setup:c.rotation=c.data.rotation+(v-360*(16384-(16384.499999999996-v/360|0)))*o;break;case a.bq.first:case a.bq.replace:v+=c.data.rotation-c.rotation;case a.bq.add:c.rotation+=(v-360*(16384-(16384.499999999996-v/360|0)))*o}}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(x),M=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=a.cQ.newFloatArray(n*e.ENTRIES),r}return s(e,t),e.prototype.getPropertyId=function(){return(l.translate<<24)+this.boneIndex},e.prototype.setFrame=function(t,n,a,r){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.X]=a,this.frames[t+e.Y]=r},e.prototype.apply=function(t,n,r,i,o,s,l){var h=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<h[0])switch(s){case a.bq.setup:return c.x=c.data.x,void(c.y=c.data.y);case a.bq.first:c.x+=(c.data.x-c.x)*o,c.y+=(c.data.y-c.y)*o}else{var u=0,f=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_X],f=h[h.length+e.PREV_Y];else{var d=E.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_X],f=h[d+e.PREV_Y];var p=h[d],m=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u+=(h[d+e.X]-u)*m,f+=(h[d+e.Y]-f)*m}switch(s){case a.bq.setup:c.x=c.data.x+u*o,c.y=c.data.y+f*o;break;case a.bq.first:case a.bq.replace:c.x+=(c.data.x+u-c.x)*o,c.y+=(c.data.y+f-c.y)*o;break;case a.bq.add:c.x+=u*o,c.y+=f*o}}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(x),I=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.getPropertyId=function(){return(l.scale<<24)+this.boneIndex},e.prototype.apply=function(t,n,r,i,o,s,l){var h=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<h[0])switch(s){case a.bq.setup:return c.scaleX=c.data.scaleX,void(c.scaleY=c.data.scaleY);case a.bq.first:c.scaleX+=(c.data.scaleX-c.scaleX)*o,c.scaleY+=(c.data.scaleY-c.scaleY)*o}else{var u=0,f=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_X]*c.data.scaleX,f=h[h.length+e.PREV_Y]*c.data.scaleY;else{var d=E.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_X],f=h[d+e.PREV_Y];var p=h[d],m=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u=(u+(h[d+e.X]-u)*m)*c.data.scaleX,f=(f+(h[d+e.Y]-f)*m)*c.data.scaleY}if(1==o)s==a.bq.add?(c.scaleX+=u-c.data.scaleX,c.scaleY+=f-c.data.scaleY):(c.scaleX=u,c.scaleY=f);else{var g=0,v=0;if(l==a.mJ.mixOut)switch(s){case a.bq.setup:g=c.data.scaleX,v=c.data.scaleY,c.scaleX=g+(Math.abs(u)*a.M8.signum(g)-g)*o,c.scaleY=v+(Math.abs(f)*a.M8.signum(v)-v)*o;break;case a.bq.first:case a.bq.replace:g=c.scaleX,v=c.scaleY,c.scaleX=g+(Math.abs(u)*a.M8.signum(g)-g)*o,c.scaleY=v+(Math.abs(f)*a.M8.signum(v)-v)*o;break;case a.bq.add:g=c.scaleX,v=c.scaleY,c.scaleX=g+(Math.abs(u)*a.M8.signum(g)-c.data.scaleX)*o,c.scaleY=v+(Math.abs(f)*a.M8.signum(v)-c.data.scaleY)*o}else switch(s){case a.bq.setup:g=Math.abs(c.data.scaleX)*a.M8.signum(u),v=Math.abs(c.data.scaleY)*a.M8.signum(f),c.scaleX=g+(u-g)*o,c.scaleY=v+(f-v)*o;break;case a.bq.first:case a.bq.replace:g=Math.abs(c.scaleX)*a.M8.signum(u),v=Math.abs(c.scaleY)*a.M8.signum(f),c.scaleX=g+(u-g)*o,c.scaleY=v+(f-v)*o;break;case a.bq.add:g=a.M8.signum(u),v=a.M8.signum(f),c.scaleX=Math.abs(c.scaleX)*g+(u-Math.abs(c.data.scaleX)*g)*o,c.scaleY=Math.abs(c.scaleY)*v+(f-Math.abs(c.data.scaleY)*v)*o}}}},e}(M),S=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.getPropertyId=function(){return(l.shear<<24)+this.boneIndex},e.prototype.apply=function(t,n,r,i,o,s,l){var h=this.frames,c=t.bones[this.boneIndex];if(c.active)if(r<h[0])switch(s){case a.bq.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case a.bq.first:c.shearX+=(c.data.shearX-c.shearX)*o,c.shearY+=(c.data.shearY-c.shearY)*o}else{var u=0,f=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_X],f=h[h.length+e.PREV_Y];else{var d=E.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_X],f=h[d+e.PREV_Y];var p=h[d],m=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u+=(h[d+e.X]-u)*m,f+=(h[d+e.Y]-f)*m}switch(s){case a.bq.setup:c.shearX=c.data.shearX+u*o,c.shearY=c.data.shearY+f*o;break;case a.bq.first:case a.bq.replace:c.shearX+=(c.data.shearX+u-c.shearX)*o,c.shearY+=(c.data.shearY+f-c.shearY)*o;break;case a.bq.add:c.shearX+=u*o,c.shearY+=f*o}}},e}(M),T=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=a.cQ.newFloatArray(n*e.ENTRIES),r}return s(e,t),e.prototype.getPropertyId=function(){return(l.color<<24)+this.slotIndex},e.prototype.setFrame=function(t,n,a,r,i,o){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.R]=a,this.frames[t+e.G]=r,this.frames[t+e.B]=i,this.frames[t+e.A]=o},e.prototype.apply=function(t,n,r,i,o,s,l){var h=t.slots[this.slotIndex];if(h.bone.active){var c=this.frames;if(r<c[0])switch(s){case a.bq.setup:return void h.color.setFromColor(h.data.color);case a.bq.first:var u=h.color,f=h.data.color;u.add((f.r-u.r)*o,(f.g-u.g)*o,(f.b-u.b)*o,(f.a-u.a)*o)}else{var d=0,p=0,m=0,g=0;if(r>=c[c.length-e.ENTRIES]){var v=c.length;d=c[v+e.PREV_R],p=c[v+e.PREV_G],m=c[v+e.PREV_B],g=c[v+e.PREV_A]}else{var y=E.binarySearch(c,r,e.ENTRIES);d=c[y+e.PREV_R],p=c[y+e.PREV_G],m=c[y+e.PREV_B],g=c[y+e.PREV_A];var b=c[y],x=this.getCurvePercent(y/e.ENTRIES-1,1-(r-b)/(c[y+e.PREV_TIME]-b));d+=(c[y+e.R]-d)*x,p+=(c[y+e.G]-p)*x,m+=(c[y+e.B]-m)*x,g+=(c[y+e.A]-g)*x}if(1==o)h.color.set(d,p,m,g);else{u=h.color;s==a.bq.setup&&u.setFromColor(h.data.color),u.add((d-u.r)*o,(p-u.g)*o,(m-u.b)*o,(g-u.a)*o)}}}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(x),A=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=a.cQ.newFloatArray(n*e.ENTRIES),r}return s(e,t),e.prototype.getPropertyId=function(){return(l.twoColor<<24)+this.slotIndex},e.prototype.setFrame=function(t,n,a,r,i,o,s,l,h){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.R]=a,this.frames[t+e.G]=r,this.frames[t+e.B]=i,this.frames[t+e.A]=o,this.frames[t+e.R2]=s,this.frames[t+e.G2]=l,this.frames[t+e.B2]=h},e.prototype.apply=function(t,n,r,i,o,s,l){var h=t.slots[this.slotIndex];if(h.bone.active){var c=this.frames;if(r<c[0])switch(s){case a.bq.setup:return h.color.setFromColor(h.data.color),void h.darkColor.setFromColor(h.data.darkColor);case a.bq.first:var u=h.color,f=h.darkColor,d=h.data.color,p=h.data.darkColor;u.add((d.r-u.r)*o,(d.g-u.g)*o,(d.b-u.b)*o,(d.a-u.a)*o),f.add((p.r-f.r)*o,(p.g-f.g)*o,(p.b-f.b)*o,0)}else{var m=0,g=0,v=0,y=0,b=0,x=0,w=0;if(r>=c[c.length-e.ENTRIES]){var M=c.length;m=c[M+e.PREV_R],g=c[M+e.PREV_G],v=c[M+e.PREV_B],y=c[M+e.PREV_A],b=c[M+e.PREV_R2],x=c[M+e.PREV_G2],w=c[M+e.PREV_B2]}else{var I=E.binarySearch(c,r,e.ENTRIES);m=c[I+e.PREV_R],g=c[I+e.PREV_G],v=c[I+e.PREV_B],y=c[I+e.PREV_A],b=c[I+e.PREV_R2],x=c[I+e.PREV_G2],w=c[I+e.PREV_B2];var S=c[I],T=this.getCurvePercent(I/e.ENTRIES-1,1-(r-S)/(c[I+e.PREV_TIME]-S));m+=(c[I+e.R]-m)*T,g+=(c[I+e.G]-g)*T,v+=(c[I+e.B]-v)*T,y+=(c[I+e.A]-y)*T,b+=(c[I+e.R2]-b)*T,x+=(c[I+e.G2]-x)*T,w+=(c[I+e.B2]-w)*T}if(1==o)h.color.set(m,g,v,y),h.darkColor.set(b,x,w,1);else{u=h.color,f=h.darkColor;s==a.bq.setup&&(u.setFromColor(h.data.color),f.setFromColor(h.data.darkColor)),u.add((m-u.r)*o,(g-u.g)*o,(v-u.b)*o,(y-u.a)*o),f.add((b-f.r)*o,(x-f.g)*o,(w-f.b)*o,0)}}}},e.ENTRIES=8,e.PREV_TIME=-8,e.PREV_R=-7,e.PREV_G=-6,e.PREV_B=-5,e.PREV_A=-4,e.PREV_R2=-3,e.PREV_G2=-2,e.PREV_B2=-1,e.R=1,e.G=2,e.B=3,e.A=4,e.R2=5,e.G2=6,e.B2=7,e}(x),R=function(){function t(t){this.frames=a.cQ.newFloatArray(t),this.attachmentNames=new Array(t)}return t.prototype.getPropertyId=function(){return(l.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.attachmentNames[t]=n},t.prototype.apply=function(t,e,n,r,i,o,s){var l=t.slots[this.slotIndex];if(l.bone.active)if(s!=a.mJ.mixOut){var h=this.frames;if(n<h[0])o!=a.bq.setup&&o!=a.bq.first||this.setAttachment(t,l,l.data.attachmentName);else{var c=0;c=n>=h[h.length-1]?h.length-1:E.binarySearch(h,n,1)-1;var u=this.attachmentNames[c];t.slots[this.slotIndex].setAttachment(null==u?null:t.getAttachment(this.slotIndex,u))}}else o==a.bq.setup&&this.setAttachment(t,l,l.data.attachmentName)},t.prototype.setAttachment=function(t,e,n){e.setAttachment(null==n?null:t.getAttachment(this.slotIndex,n))},t}(),C=null,V=function(t){function e(e){var n=t.call(this,e)||this;return n.frames=a.cQ.newFloatArray(e),n.frameVertices=new Array(e),null==C&&(C=a.cQ.newFloatArray(64)),n}return s(e,t),e.prototype.getPropertyId=function(){return(l.deform<<27)+ +this.attachment.id+this.slotIndex},e.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.frameVertices[t]=n},e.prototype.apply=function(t,e,n,r,i,o,s){var l=t.slots[this.slotIndex];if(l.bone.active){var h=l.getAttachment();if(h instanceof c&&h.deformAttachment==this.attachment){var u=l.deform;0==u.length&&(o=a.bq.setup);var f=this.frameVertices,d=f[0].length,p=this.frames;if(n<p[0]){var m=h;switch(o){case a.bq.setup:return void(u.length=0);case a.bq.first:if(1==i){u.length=0;break}var g=a.cQ.setArraySize(u,d);if(null==m.bones)for(var v=m.vertices,y=0;y<d;y++)g[y]+=(v[y]-g[y])*i;else{i=1-i;for(y=0;y<d;y++)g[y]*=i}}}else{var b=a.cQ.setArraySize(u,d);if(n>=p[p.length-1]){var x=f[p.length-1];if(1==i)if(o==a.bq.add)if(null==(m=h).bones){v=m.vertices;for(var w=0;w<d;w++)b[w]+=x[w]-v[w]}else for(var M=0;M<d;M++)b[M]+=x[M];else a.cQ.arrayCopy(x,0,b,0,d);else switch(o){case a.bq.setup:var I=h;if(null==I.bones){v=I.vertices;for(var S=0;S<d;S++){var T=v[S];b[S]=T+(x[S]-T)*i}}else for(var A=0;A<d;A++)b[A]=x[A]*i;break;case a.bq.first:case a.bq.replace:for(var R=0;R<d;R++)b[R]+=(x[R]-b[R])*i;break;case a.bq.add:if(null==(m=h).bones){v=m.vertices;for(var C=0;C<d;C++)b[C]+=(x[C]-v[C])*i}else for(var V=0;V<d;V++)b[V]+=x[V]*i}}else{var k=E.binarySearch(p,n),P=f[k-1],F=f[k],N=p[k],Y=this.getCurvePercent(k-1,1-(n-N)/(p[k-1]-N));if(1==i)if(o==a.bq.add)if(null==(m=h).bones){v=m.vertices;for(var _=0;_<d;_++){var X=P[_];b[_]+=X+(F[_]-X)*Y-v[_]}}else for(var O=0;O<d;O++){X=P[O];b[O]+=X+(F[O]-X)*Y}else for(var D=0;D<d;D++){X=P[D];b[D]=X+(F[D]-X)*Y}else switch(o){case a.bq.setup:var q=h;if(null==q.bones){v=q.vertices;for(var B=0;B<d;B++){X=P[B],T=v[B];b[B]=T+(X+(F[B]-X)*Y-T)*i}}else for(var L=0;L<d;L++){X=P[L];b[L]=(X+(F[L]-X)*Y)*i}break;case a.bq.first:case a.bq.replace:for(var W=0;W<d;W++){X=P[W];b[W]+=(X+(F[W]-X)*Y-b[W])*i}break;case a.bq.add:if(null==(m=h).bones){v=m.vertices;for(var Q=0;Q<d;Q++){X=P[Q];b[Q]+=(X+(F[Q]-X)*Y-v[Q])*i}}else for(var U=0;U<d;U++){X=P[U];b[U]+=(X+(F[U]-X)*Y)*i}}}}}}},e}(x),k=function(){function t(t){this.frames=a.cQ.newFloatArray(t),this.events=new Array(t)}return t.prototype.getPropertyId=function(){return l.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},t.prototype.apply=function(t,e,n,a,r,i,o){if(null!=a){var s=this.frames,l=this.frames.length;if(e>n)this.apply(t,e,Number.MAX_VALUE,a,r,i,o),e=-1;else if(e>=s[l-1])return;if(!(n<s[0])){var h=0;if(e<s[0])h=0;else for(var c=s[h=E.binarySearch(s,e)];h>0&&s[h-1]==c;)h--;for(;h<l&&n>=s[h];h++)a.push(this.events[h])}}},t}(),P=function(){function t(t){this.frames=a.cQ.newFloatArray(t),this.drawOrders=new Array(t)}return t.prototype.getPropertyId=function(){return l.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,n){this.frames[t]=e,this.drawOrders[t]=n},t.prototype.apply=function(t,e,n,r,i,o,s){var l=t.drawOrder,h=t.slots;if(s!=a.mJ.mixOut||o!=a.bq.setup){var c=this.frames;if(n<c[0])o!=a.bq.setup&&o!=a.bq.first||a.cQ.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var u=0;u=n>=c[c.length-1]?c.length-1:E.binarySearch(c,n)-1;var f=this.drawOrders[u];if(null==f)a.cQ.arrayCopy(h,0,l,0,h.length);else for(var d=0,p=f.length;d<p;d++)l[d]=h[f[d]]}}else a.cQ.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},t}(),F=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=a.cQ.newFloatArray(n*e.ENTRIES),r}return s(e,t),e.prototype.getPropertyId=function(){return(l.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(t,n,a,r,i,o,s){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.MIX]=a,this.frames[t+e.SOFTNESS]=r,this.frames[t+e.BEND_DIRECTION]=i,this.frames[t+e.COMPRESS]=o?1:0,this.frames[t+e.STRETCH]=s?1:0},e.prototype.apply=function(t,n,r,i,o,s,l){var h=this.frames,c=t.ikConstraints[this.ikConstraintIndex];if(c.active)if(r<h[0])switch(s){case a.bq.setup:return c.mix=c.data.mix,c.softness=c.data.softness,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,void(c.stretch=c.data.stretch);case a.bq.first:c.mix+=(c.data.mix-c.mix)*o,c.softness+=(c.data.softness-c.softness)*o,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch}else if(r>=h[h.length-e.ENTRIES])s==a.bq.setup?(c.mix=c.data.mix+(h[h.length+e.PREV_MIX]-c.data.mix)*o,c.softness=c.data.softness+(h[h.length+e.PREV_SOFTNESS]-c.data.softness)*o,l==a.mJ.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=h[h.length+e.PREV_BEND_DIRECTION],c.compress=0!=h[h.length+e.PREV_COMPRESS],c.stretch=0!=h[h.length+e.PREV_STRETCH])):(c.mix+=(h[h.length+e.PREV_MIX]-c.mix)*o,c.softness+=(h[h.length+e.PREV_SOFTNESS]-c.softness)*o,l==a.mJ.mixIn&&(c.bendDirection=h[h.length+e.PREV_BEND_DIRECTION],c.compress=0!=h[h.length+e.PREV_COMPRESS],c.stretch=0!=h[h.length+e.PREV_STRETCH]));else{var u=E.binarySearch(h,r,e.ENTRIES),f=h[u+e.PREV_MIX],d=h[u+e.PREV_SOFTNESS],p=h[u],m=this.getCurvePercent(u/e.ENTRIES-1,1-(r-p)/(h[u+e.PREV_TIME]-p));s==a.bq.setup?(c.mix=c.data.mix+(f+(h[u+e.MIX]-f)*m-c.data.mix)*o,c.softness=c.data.softness+(d+(h[u+e.SOFTNESS]-d)*m-c.data.softness)*o,l==a.mJ.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=h[u+e.PREV_BEND_DIRECTION],c.compress=0!=h[u+e.PREV_COMPRESS],c.stretch=0!=h[u+e.PREV_STRETCH])):(c.mix+=(f+(h[u+e.MIX]-f)*m-c.mix)*o,c.softness+=(d+(h[u+e.SOFTNESS]-d)*m-c.softness)*o,l==a.mJ.mixIn&&(c.bendDirection=h[u+e.PREV_BEND_DIRECTION],c.compress=0!=h[u+e.PREV_COMPRESS],c.stretch=0!=h[u+e.PREV_STRETCH]))}},e.ENTRIES=6,e.PREV_TIME=-6,e.PREV_MIX=-5,e.PREV_SOFTNESS=-4,e.PREV_BEND_DIRECTION=-3,e.PREV_COMPRESS=-2,e.PREV_STRETCH=-1,e.MIX=1,e.SOFTNESS=2,e.BEND_DIRECTION=3,e.COMPRESS=4,e.STRETCH=5,e}(x),N=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=a.cQ.newFloatArray(n*e.ENTRIES),r}return s(e,t),e.prototype.getPropertyId=function(){return(l.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(t,n,a,r,i,o){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.ROTATE]=a,this.frames[t+e.TRANSLATE]=r,this.frames[t+e.SCALE]=i,this.frames[t+e.SHEAR]=o},e.prototype.apply=function(t,n,r,i,o,s,l){var h=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(c.active)if(r<h[0]){var u=c.data;switch(s){case a.bq.setup:return c.rotateMix=u.rotateMix,c.translateMix=u.translateMix,c.scaleMix=u.scaleMix,void(c.shearMix=u.shearMix);case a.bq.first:c.rotateMix+=(u.rotateMix-c.rotateMix)*o,c.translateMix+=(u.translateMix-c.translateMix)*o,c.scaleMix+=(u.scaleMix-c.scaleMix)*o,c.shearMix+=(u.shearMix-c.shearMix)*o}}else{var f=0,d=0,p=0,m=0;if(r>=h[h.length-e.ENTRIES]){var g=h.length;f=h[g+e.PREV_ROTATE],d=h[g+e.PREV_TRANSLATE],p=h[g+e.PREV_SCALE],m=h[g+e.PREV_SHEAR]}else{var v=E.binarySearch(h,r,e.ENTRIES);f=h[v+e.PREV_ROTATE],d=h[v+e.PREV_TRANSLATE],p=h[v+e.PREV_SCALE],m=h[v+e.PREV_SHEAR];var y=h[v],b=this.getCurvePercent(v/e.ENTRIES-1,1-(r-y)/(h[v+e.PREV_TIME]-y));f+=(h[v+e.ROTATE]-f)*b,d+=(h[v+e.TRANSLATE]-d)*b,p+=(h[v+e.SCALE]-p)*b,m+=(h[v+e.SHEAR]-m)*b}if(s==a.bq.setup){u=c.data;c.rotateMix=u.rotateMix+(f-u.rotateMix)*o,c.translateMix=u.translateMix+(d-u.translateMix)*o,c.scaleMix=u.scaleMix+(p-u.scaleMix)*o,c.shearMix=u.shearMix+(m-u.shearMix)*o}else c.rotateMix+=(f-c.rotateMix)*o,c.translateMix+=(d-c.translateMix)*o,c.scaleMix+=(p-c.scaleMix)*o,c.shearMix+=(m-c.shearMix)*o}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(x),Y=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=a.cQ.newFloatArray(n*e.ENTRIES),r}return s(e,t),e.prototype.getPropertyId=function(){return(l.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,n,a){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.VALUE]=a},e.prototype.apply=function(t,n,r,i,o,s,l){var h=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(r<h[0])switch(s){case a.bq.setup:return void(c.position=c.data.position);case a.bq.first:c.position+=(c.data.position-c.position)*o}else{var u=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_VALUE];else{var f=E.binarySearch(h,r,e.ENTRIES);u=h[f+e.PREV_VALUE];var d=h[f],p=this.getCurvePercent(f/e.ENTRIES-1,1-(r-d)/(h[f+e.PREV_TIME]-d));u+=(h[f+e.VALUE]-u)*p}s==a.bq.setup?c.position=c.data.position+(u-c.data.position)*o:c.position+=(u-c.position)*o}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(x),_=function(t){function e(e){return t.call(this,e)||this}return s(e,t),e.prototype.getPropertyId=function(){return(l.pathConstraintSpacing<<24)+this.pathConstraintIndex},e.prototype.apply=function(t,n,r,i,o,s,l){var h=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(r<h[0])switch(s){case a.bq.setup:return void(c.spacing=c.data.spacing);case a.bq.first:c.spacing+=(c.data.spacing-c.spacing)*o}else{var u=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_VALUE];else{var f=E.binarySearch(h,r,e.ENTRIES);u=h[f+e.PREV_VALUE];var d=h[f],p=this.getCurvePercent(f/e.ENTRIES-1,1-(r-d)/(h[f+e.PREV_TIME]-d));u+=(h[f+e.VALUE]-u)*p}s==a.bq.setup?c.spacing=c.data.spacing+(u-c.data.spacing)*o:c.spacing+=(u-c.spacing)*o}},e}(Y),X=function(t){function e(n){var r=t.call(this,n)||this;return r.frames=a.cQ.newFloatArray(n*e.ENTRIES),r}return s(e,t),e.prototype.getPropertyId=function(){return(l.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,n,a,r){t*=e.ENTRIES,this.frames[t]=n,this.frames[t+e.ROTATE]=a,this.frames[t+e.TRANSLATE]=r},e.prototype.apply=function(t,n,r,i,o,s,l){var h=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(c.active)if(r<h[0])switch(s){case a.bq.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case a.bq.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*o,c.translateMix+=(c.data.translateMix-c.translateMix)*o}else{var u=0,f=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_ROTATE],f=h[h.length+e.PREV_TRANSLATE];else{var d=E.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_ROTATE],f=h[d+e.PREV_TRANSLATE];var p=h[d],m=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u+=(h[d+e.ROTATE]-u)*m,f+=(h[d+e.TRANSLATE]-f)*m}s==a.bq.setup?(c.rotateMix=c.data.rotateMix+(u-c.data.rotateMix)*o,c.translateMix=c.data.translateMix+(f-c.data.translateMix)*o):(c.rotateMix+=(u-c.rotateMix)*o,c.translateMix+=(f-c.translateMix)*o)}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(x),O=function(){function t(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new q(this),this.propertyIDs=new a.JS,this.animationsChanged=!1,this.trackEntryPool=new a.Kg((function(){return new D})),this.data=t}return t.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,n=0,a=e.length;n<a;n++){var r=e[n];if(null!=r){r.animationLast=r.nextAnimationLast,r.trackLast=r.nextTrackLast;var i=t*r.timeScale;if(r.delay>0){if(r.delay-=i,r.delay>0)continue;i=-r.delay,r.delay=0}var o=r.next;if(null!=o){var s=r.trackLast-o.delay;if(s>=0){for(o.delay=0,o.trackTime+=0==r.timeScale?0:(s/r.timeScale+t)*o.timeScale,r.trackTime+=i,this.setCurrent(n,o,!0);null!=o.mixingFrom;)o.mixTime+=t,o=o.mixingFrom;continue}}else if(r.trackLast>=r.trackEnd&&null==r.mixingFrom){e[n]=null,this.queue.end(r),this.disposeNext(r);continue}if(null!=r.mixingFrom&&this.updateMixingFrom(r,t)){var l=r.mixingFrom;for(r.mixingFrom=null,null!=l&&(l.mixingTo=null);null!=l;)this.queue.end(l),l=l.mixingFrom}r.trackTime+=i}}this.queue.drain()},t.prototype.updateMixingFrom=function(t,e){var n=t.mixingFrom;if(null==n)return!0;var a=this.updateMixingFrom(n,e);return n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=n.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=n.mixingFrom,null!=n.mixingFrom&&(n.mixingFrom.mixingTo=t),t.interruptAlpha=n.interruptAlpha,this.queue.end(n)),a):(n.trackTime+=e*n.timeScale,t.mixTime+=e,!1)},t.prototype.apply=function(e){if(null==e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var n=this.events,r=this.tracks,i=!1,o=0,s=r.length;o<s;o++){var l=r[o];if(!(null==l||l.delay>0)){i=!0;var h=0==o?a.bq.first:l.mixBlend,c=l.alpha;null!=l.mixingFrom?c*=this.applyMixingFrom(l,e,h):l.trackTime>=l.trackEnd&&null==l.next&&(c=0);var u=l.animationLast,f=l.getAnimationTime(),d=l.animation.timelines.length,p=l.animation.timelines;if(0==o&&1==c||h==a.bq.add)for(var m=0;m<d;m++){a.cQ.webkit602BugfixHelper(c,h);var g=p[m];g instanceof R?this.applyAttachmentTimeline(g,e,f,h,!0):g.apply(e,u,f,n,c,h,a.mJ.mixIn)}else{var v=l.timelineMode,y=0==l.timelinesRotation.length;y&&a.cQ.setArraySize(l.timelinesRotation,d<<1,null);var E=l.timelinesRotation;for(m=0;m<d;m++){var b=p[m],x=v[m]==t.SUBSEQUENT?h:a.bq.setup;b instanceof w?this.applyRotateTimeline(b,e,f,c,x,E,m<<1,y):b instanceof R?this.applyAttachmentTimeline(b,e,f,h,!0):(a.cQ.webkit602BugfixHelper(c,h),b.apply(e,u,f,n,c,x,a.mJ.mixIn))}}this.queueEvents(l,f),n.length=0,l.nextAnimationLast=f,l.nextTrackLast=l.trackTime}}for(var M=this.unkeyedState+t.SETUP,I=e.slots,S=0,T=e.slots.length;S<T;S++){var A=I[S];if(A.attachmentState==M){var C=A.data.attachmentName;A.setAttachment(null==C?null:e.getAttachment(A.data.index,C))}}return this.unkeyedState+=2,this.queue.drain(),i},t.prototype.applyMixingFrom=function(e,n,r){var i=e.mixingFrom;null!=i.mixingFrom&&this.applyMixingFrom(i,n,r);var o=0;0==e.mixDuration?(o=1,r==a.bq.first&&(r=a.bq.setup)):((o=e.mixTime/e.mixDuration)>1&&(o=1),r!=a.bq.first&&(r=i.mixBlend));var s=o<i.eventThreshold?this.events:null,l=o<i.attachmentThreshold,h=o<i.drawOrderThreshold,c=i.animationLast,u=i.getAnimationTime(),f=i.animation.timelines.length,d=i.animation.timelines,p=i.alpha*e.interruptAlpha,m=p*(1-o);if(r==a.bq.add)for(var g=0;g<f;g++)d[g].apply(n,c,u,s,m,r,a.mJ.mixOut);else{var v=i.timelineMode,y=i.timelineHoldMix,E=0==i.timelinesRotation.length;E&&a.cQ.setArraySize(i.timelinesRotation,f<<1,null);var b=i.timelinesRotation;i.totalAlpha=0;for(g=0;g<f;g++){var x=d[g],M=a.mJ.mixOut,I=void 0,S=0;switch(v[g]){case t.SUBSEQUENT:if(!h&&x instanceof P)continue;I=r,S=m;break;case t.FIRST:I=a.bq.setup,S=m;break;case t.HOLD_SUBSEQUENT:I=r,S=p;break;case t.HOLD_FIRST:I=a.bq.setup,S=p;break;default:I=a.bq.setup;var T=y[g];S=p*Math.max(0,1-T.mixTime/T.mixDuration)}i.totalAlpha+=S,x instanceof w?this.applyRotateTimeline(x,n,u,S,I,b,g<<1,E):x instanceof R?this.applyAttachmentTimeline(x,n,u,I,l):(a.cQ.webkit602BugfixHelper(S,r),h&&x instanceof P&&I==a.bq.setup&&(M=a.mJ.mixIn),x.apply(n,c,u,s,S,I,M))}}return e.mixDuration>0&&this.queueEvents(i,u),this.events.length=0,i.nextAnimationLast=u,i.nextTrackLast=i.trackTime,o},t.prototype.applyAttachmentTimeline=function(e,n,r,i,o){var s=n.slots[e.slotIndex];if(s.bone.active){var l,h=e.frames;if(r<h[0])i!=a.bq.setup&&i!=a.bq.first||this.setAttachment(n,s,s.data.attachmentName,o);else l=r>=h[h.length-1]?h.length-1:E.binarySearch(h,r)-1,this.setAttachment(n,s,e.attachmentNames[l],o);s.attachmentState<=this.unkeyedState&&(s.attachmentState=this.unkeyedState+t.SETUP)}},t.prototype.setAttachment=function(e,n,a,r){n.setAttachment(null==a?null:e.getAttachment(n.data.index,a)),r&&(n.attachmentState=this.unkeyedState+t.CURRENT)},t.prototype.applyRotateTimeline=function(t,e,n,r,i,o,s,l){if(l&&(o[s]=0),1!=r){var h=t,c=h.frames,u=e.bones[h.boneIndex];if(u.active){var f=0,d=0;if(n<c[0])switch(i){case a.bq.setup:u.rotation=u.data.rotation;default:return;case a.bq.first:f=u.rotation,d=u.data.rotation}else if(f=i==a.bq.setup?u.data.rotation:u.rotation,n>=c[c.length-w.ENTRIES])d=u.data.rotation+c[c.length+w.PREV_ROTATION];else{var p=E.binarySearch(c,n,w.ENTRIES),m=c[p+w.PREV_ROTATION],g=c[p],v=h.getCurvePercent((p>>1)-1,1-(n-g)/(c[p+w.PREV_TIME]-g));d=c[p+w.ROTATION]-m,d=m+(d-=360*(16384-(16384.499999999996-d/360|0)))*v+u.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var y=0,b=d-f;if(0==(b-=360*(16384-(16384.499999999996-b/360|0))))y=o[s];else{var x=0,M=0;l?(x=0,M=b):(x=o[s],M=o[s+1]);var I=b>0,S=x>=0;a.M8.signum(M)!=a.M8.signum(b)&&Math.abs(M)<=90&&(Math.abs(x)>180&&(x+=360*a.M8.signum(x)),S=I),y=b+x-x%360,S!=I&&(y+=360*a.M8.signum(x)),o[s]=y}o[s+1]=b,f+=y*r,u.rotation=f-360*(16384-(16384.499999999996-f/360|0))}}else t.apply(e,0,n,null,1,i,a.mJ.mixIn)},t.prototype.queueEvents=function(t,e){for(var n=t.animationStart,a=t.animationEnd,r=a-n,i=t.trackLast%r,o=this.events,s=0,l=o.length;s<l;s++){var h=o[s];if(h.time<i)break;h.time>a||this.queue.event(t,h)}for((t.loop?0==r||i>t.trackTime%r:e>=a&&t.animationLast<a)&&this.queue.complete(t);s<l;s++){o[s].time<n||this.queue.event(t,o[s])}},t.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,n=this.tracks.length;e<n;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},t.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var n=e;;){var a=n.mixingFrom;if(null==a)break;this.queue.end(a),n.mixingFrom=null,n.mixingTo=null,n=a}this.tracks[e.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(t,e,n){var a=this.expandToIndex(t);this.tracks[t]=e,null!=a&&(n&&this.queue.interrupt(a),e.mixingFrom=a,a.mixingTo=e,e.mixTime=0,null!=a.mixingFrom&&a.mixDuration>0&&(e.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(e)},t.prototype.setAnimation=function(t,e,n){var a=this.data.skeletonData.findAnimation(e);if(null==a)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,a,n)},t.prototype.setAnimationWith=function(t,e,n){if(null==e)throw new Error("animation cannot be null.");var a=!0,r=this.expandToIndex(t);null!=r&&(-1==r.nextTrackLast?(this.tracks[t]=r.mixingFrom,this.queue.interrupt(r),this.queue.end(r),this.disposeNext(r),r=r.mixingFrom,a=!1):this.disposeNext(r));var i=this.trackEntry(t,e,n,r);return this.setCurrent(t,i,a),this.queue.drain(),i},t.prototype.addAnimation=function(t,e,n,a){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,r,n,a)},t.prototype.addAnimationWith=function(t,e,n,a){if(null==e)throw new Error("animation cannot be null.");var r=this.expandToIndex(t);if(null!=r)for(;null!=r.next;)r=r.next;var i=this.trackEntry(t,e,n,r);if(null==r)this.setCurrent(t,i,!0),this.queue.drain();else if(r.next=i,a<=0){var o=r.animationEnd-r.animationStart;0!=o?(r.loop?a+=o*(1+(r.trackTime/o|0)):a+=Math.max(o,r.trackTime),a-=this.data.getMix(r.animation,e)):a=r.trackTime}return i.delay=a,i},t.prototype.setEmptyAnimation=function(e,n){var a=this.setAnimationWith(e,t.emptyAnimation,!1);return a.mixDuration=n,a.trackEnd=n,a},t.prototype.addEmptyAnimation=function(e,n,a){a<=0&&(a-=n);var r=this.addAnimationWith(e,t.emptyAnimation,!1,a);return r.mixDuration=n,r.trackEnd=n,r},t.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var n=0,a=this.tracks.length;n<a;n++){var r=this.tracks[n];null!=r&&this.setEmptyAnimation(r.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(a.cQ.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(t,e,n,r){var i=this.trackEntryPool.obtain();return i.trackIndex=t,i.animation=e,i.loop=n,i.holdPrevious=!1,i.eventThreshold=0,i.attachmentThreshold=0,i.drawOrderThreshold=0,i.animationStart=0,i.animationEnd=e.duration,i.animationLast=-1,i.nextAnimationLast=-1,i.delay=0,i.trackTime=0,i.trackLast=-1,i.nextTrackLast=-1,i.trackEnd=Number.MAX_VALUE,i.timeScale=1,i.alpha=1,i.interruptAlpha=1,i.mixTime=0,i.mixDuration=null==r?0:this.data.getMix(r.animation,e),i.mixBlend=a.bq.replace,i},t.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++){var n=this.tracks[t];if(null!=n){for(;null!=n.mixingFrom;)n=n.mixingFrom;do{null!=n.mixingFrom&&n.mixBlend==a.bq.add||this.computeHold(n),n=n.mixingTo}while(null!=n)}}},t.prototype.computeHold=function(e){var n=e.mixingTo,r=e.animation.timelines,i=e.animation.timelines.length,o=a.cQ.setArraySize(e.timelineMode,i);e.timelineHoldMix.length=0;var s=a.cQ.setArraySize(e.timelineHoldMix,i),l=this.propertyIDs;if(null!=n&&n.holdPrevious)for(var h=0;h<i;h++)o[h]=l.add(r[h].getPropertyId())?t.HOLD_FIRST:t.HOLD_SUBSEQUENT;else t:for(h=0;h<i;h++){var c=r[h],u=c.getPropertyId();if(l.add(u))if(null==n||c instanceof R||c instanceof P||c instanceof k||!n.animation.hasTimeline(u))o[h]=t.FIRST;else{for(var f=n.mixingTo;null!=f;f=f.mixingTo)if(!f.animation.hasTimeline(u)){if(e.mixDuration>0){o[h]=t.HOLD_MIX,s[h]=f;continue t}break}o[h]=t.HOLD_FIRST}else o[h]=t.SUBSEQUENT}},t.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},t.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,n,a){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,n,a)},t.prototype.addAnimationByName=function(e,n,a,r){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,n,a,r)},t.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new E("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD_SUBSEQUENT=2,t.HOLD_FIRST=3,t.HOLD_MIX=4,t.SETUP=1,t.CURRENT=2,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),D=function(){function t(){this.mixBlend=a.bq.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),q=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(b.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(b.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(b.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(b.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(b.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(b.event),this.objects.push(t),this.objects.push(e)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];switch(r){case b.start:null!=i.listener&&i.listener.start&&i.listener.start(i);for(var o=0;o<e.length;o++)e[o].start&&e[o].start(i);i.onStart&&this.deprecateStuff()&&i.onStart(i.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(i.trackIndex);break;case b.interrupt:null!=i.listener&&i.listener.interrupt&&i.listener.interrupt(i);for(o=0;o<e.length;o++)e[o].interrupt&&e[o].interrupt(i);break;case b.end:null!=i.listener&&i.listener.end&&i.listener.end(i);for(o=0;o<e.length;o++)e[o].end&&e[o].end(i);i.onEnd&&this.deprecateStuff()&&i.onEnd(i.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(i.trackIndex);case b.dispose:null!=i.listener&&i.listener.dispose&&i.listener.dispose(i);for(o=0;o<e.length;o++)e[o].dispose&&e[o].dispose(i);this.animState.trackEntryPool.free(i);break;case b.complete:null!=i.listener&&i.listener.complete&&i.listener.complete(i);for(o=0;o<e.length;o++)e[o].complete&&e[o].complete(i);var s=a.M8.toInt(i.loopsCount());i.onComplete&&this.deprecateStuff()&&i.onComplete(i.trackIndex,s),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(i.trackIndex,s);break;case b.event:var l=t[2+n++];null!=i.listener&&i.listener.event&&i.listener.event(i,l);for(o=0;o<e.length;o++)e[o].event&&e[o].event(i,l);i.onEvent&&this.deprecateStuff()&&i.onEvent(i.trackIndex,l),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(i.trackIndex,l)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(b||(b={}));var B,L=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}(),W=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,n){var a=this.skeletonData.findAnimation(t);if(null==a)throw new Error("Animation not found: "+t);var r=this.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);this.setMixWith(a,r,n)},t.prototype.setMixByName=function(e,n,a){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,n,a)},t.prototype.setMixWith=function(t,e,n){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var a=t.name+"."+e.name;this.animationToMixTime[a]=n},t.prototype.getMix=function(t,e){var n=t.name+"."+e.name,a=this.animationToMixTime[n];return void 0===a?this.defaultMix:a},t.deprecatedWarning1=!1,t}(),Q=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,n){var a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (region attachment: "+e+")");var r=new g(e);return r.region=a,r},t.prototype.newMeshAttachment=function(t,e,n){var a=this.atlas.findRegion(n);if(null==a)throw new Error("Region not found in atlas: "+n+" (mesh attachment: "+e+")");var r=new d(e);return r.region=a,r},t.prototype.newBoundingBoxAttachment=function(t,e){return new u(e)},t.prototype.newPathAttachment=function(t,e){return new p(e)},t.prototype.newPointAttachment=function(t,e){return new m(e)},t.prototype.newClippingAttachment=function(t,e){return new f(e)},t}(),U=function(){function t(t,e,n){if(this.matrix=new r.y3,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=n,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,e,n,r,i,o,s){this.ax=t,this.ay=e,this.arotation=n,this.ascaleX=r,this.ascaleY=i,this.ashearX=o,this.ashearY=s,this.appliedValid=!0;var l=this.parent,h=this.matrix,c=this.skeleton.scaleX,u=a.Xd.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==l){var f=this.skeleton,d=n+90+s;return h.a=a.M8.cosDeg(n+o)*r*c,h.c=a.M8.cosDeg(d)*i*c,h.b=a.M8.sinDeg(n+o)*r*u,h.d=a.M8.sinDeg(d)*i*u,h.tx=t*c+f.x,void(h.ty=e*u+f.y)}var p=l.matrix.a,m=l.matrix.c,g=l.matrix.b,v=l.matrix.d;switch(h.tx=p*t+m*e+l.matrix.tx,h.ty=g*t+v*e+l.matrix.ty,this.data.transformMode){case a.Qe.Normal:d=n+90+s;var y=a.M8.cosDeg(n+o)*r,E=a.M8.cosDeg(d)*i,b=a.M8.sinDeg(n+o)*r,x=a.M8.sinDeg(d)*i;return h.a=p*y+m*b,h.c=p*E+m*x,h.b=g*y+v*b,void(h.d=g*E+v*x);case a.Qe.OnlyTranslation:d=n+90+s;h.a=a.M8.cosDeg(n+o)*r,h.c=a.M8.cosDeg(d)*i,h.b=a.M8.sinDeg(n+o)*r,h.d=a.M8.sinDeg(d)*i;break;case a.Qe.NoRotationOrReflection:var w=0;(S=p*p+g*g)>1e-4?(S=Math.abs(p*v-m*g)/S,p/=this.skeleton.scaleX,m=(g/=this.skeleton.scaleY)*S,v=p*S,w=Math.atan2(g,p)*a.M8.radDeg):(p=0,g=0,w=90-Math.atan2(v,m)*a.M8.radDeg);var M=n+o-w,I=n+s-w+90;y=a.M8.cosDeg(M)*r,E=a.M8.cosDeg(I)*i,b=a.M8.sinDeg(M)*r,x=a.M8.sinDeg(I)*i;h.a=p*y-m*b,h.c=p*E-m*x,h.b=g*y+v*b,h.d=g*E+v*x;break;case a.Qe.NoScale:case a.Qe.NoScaleOrReflection:var S,T=a.M8.cosDeg(n),A=a.M8.sinDeg(n),R=(p*T+m*A)/c,C=(g*T+v*A)/u;(S=Math.sqrt(R*R+C*C))>1e-5&&(S=1/S),R*=S,C*=S,S=Math.sqrt(R*R+C*C),this.data.transformMode==a.Qe.NoScale&&p*v-m*g<0!=(a.Xd.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(S=-S);var V=Math.PI/2+Math.atan2(C,R),k=Math.cos(V)*S,P=Math.sin(V)*S;y=a.M8.cosDeg(o)*r,E=a.M8.cosDeg(90+s)*i,b=a.M8.sinDeg(o)*r,x=a.M8.sinDeg(90+s)*i;h.a=R*y+k*b,h.c=R*E+k*x,h.b=C*y+P*b,h.d=C*E+P*x}h.a*=c,h.c*=c,h.b*=u,h.d*=u},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*a.M8.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*a.M8.radDeg},t.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},t.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*a.M8.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*a.M8.radDeg);var n=t.matrix,r=1/(n.a*n.d-n.b*n.c),i=e.tx-n.tx,o=e.ty-n.ty;this.ax=i*n.d*r-o*n.c*r,this.ay=o*n.a*r-i*n.b*r;var s=r*n.d,l=r*n.a,h=r*n.c,c=r*n.b,u=s*e.a-h*e.b,f=s*e.c-h*e.d,d=l*e.b-c*e.a,p=l*e.d-c*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+d*d),this.ascaleX>1e-4){var m=u*p-f*d;this.ascaleY=m/this.ascaleX,this.ashearY=Math.atan2(u*f+d*p,m)*a.M8.radDeg,this.arotation=Math.atan2(d,u)*a.M8.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(f*f+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,f)*a.M8.radDeg},t.prototype.worldToLocal=function(t){var e=this.matrix,n=e.a,a=e.c,r=e.b,i=e.d,o=1/(n*i-a*r),s=t.x-e.tx,l=t.y-e.ty;return t.x=s*i*o-l*a*o,t.y=l*n*o-s*r*o,t},t.prototype.localToWorld=function(t){var e=this.matrix,n=t.x,a=t.y;return t.x=n*e.a+a*e.c+e.tx,t.y=n*e.b+a*e.d+e.ty,t},t.prototype.worldToLocalRotation=function(t){var e=a.M8.sinDeg(t),n=a.M8.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*n,r.d*n-r.c*e)*a.M8.radDeg},t.prototype.localToWorldRotation=function(t){var e=a.M8.sinDeg(t),n=a.M8.cosDeg(t),r=this.matrix;return Math.atan2(n*r.b+e*r.d,n*r.a+e*r.c)*a.M8.radDeg},t.prototype.rotateWorld=function(t){var e=this.matrix,n=e.a,r=e.c,i=e.b,o=e.d,s=a.M8.cosDeg(t),l=a.M8.sinDeg(t);e.a=s*n-l*i,e.c=s*r-l*o,e.b=l*n+s*i,e.d=l*r+s*o,this.appliedValid=!1},t}(),H=function(t,e,n){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=a.Qe.Normal,this.skinRequired=!1,this.color=new a.Il,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=n},j=function(t,e,n){this.name=t,this.order=e,this.skinRequired=n},G=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},Z=function(t){this.name=t},z=function(){function t(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},t.prototype.apply1=function(t,e,n,r,i,o,s){t.appliedValid||t.updateAppliedTransform();var l=t.parent.matrix,h=l.a,c=l.c,u=l.b,f=l.d,d=-t.ashearX-t.arotation,p=0,m=0;switch(t.data.transformMode){case a.Qe.OnlyTranslation:p=e-t.worldX,m=n-t.worldY;break;case a.Qe.NoRotationOrReflection:var g=Math.abs(h*f-c*u)/(h*h+u*u),v=h/t.skeleton.scaleX,y=u/t.skeleton.scaleY;c=-y*g*t.skeleton.scaleX,f=v*g*t.skeleton.scaleY,d+=Math.atan2(y,v)*a.M8.radDeg;default:var E=e-l.tx,b=n-l.ty,x=h*f-c*u;p=(E*f-b*c)/x-t.ax,m=(b*h-E*u)/x-t.ay}d+=Math.atan2(m,p)*a.M8.radDeg,t.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var w=t.ascaleX,M=t.ascaleY;if(r||i){switch(t.data.transformMode){case a.Qe.NoScale:case a.Qe.NoScaleOrReflection:p=e-t.worldX,m=n-t.worldY}var I=t.data.length*w,S=Math.sqrt(p*p+m*m);if(r&&S<I||i&&S>I&&I>1e-4)w*=g=(S/I-1)*s+1,o&&(M*=g)}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*s,w,M,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,n,r,i,o,s,l){if(0!=l){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var h=t.ax,c=t.ay,u=t.ascaleX,f=u,d=t.ascaleY,p=e.ascaleX,m=t.matrix,g=0,v=0,y=0;u<0?(u=-u,g=180,y=-1):(g=0,y=1),d<0&&(d=-d,y=-y),p<0?(p=-p,v=180):v=0;var E=e.ax,b=0,x=0,w=0,M=m.a,I=m.c,S=m.b,T=m.d,A=Math.abs(u-d)<=1e-4;A?(x=M*E+I*(b=e.ay)+m.tx,w=S*E+T*b+m.ty):(b=0,x=M*E+m.tx,w=S*E+m.ty);var R=t.parent.matrix;M=R.a,I=R.c,S=R.b;var C,V,k=1/(M*(T=R.d)-I*S),P=x-R.tx,F=w-R.ty,N=(P*T-F*I)*k-h,Y=(F*M-P*S)*k-c,_=Math.sqrt(N*N+Y*Y),X=e.data.length*p;if(_<1e-4)return this.apply1(t,n,r,!1,o,!1,l),void e.updateWorldTransformWith(E,b,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var O=((P=n-R.tx)*T-(F=r-R.ty)*I)*k-h,D=(F*M-P*S)*k-c,q=O*O+D*D;if(0!=s){s*=u*(p+1)/2;var B=Math.sqrt(q),L=B-_-X*u+s;if(L>0){var W=Math.min(1,L/(2*s))-1;q=(O-=(W=(L-s*(1-W*W))/B)*O)*O+(D-=W*D)*D}}t:if(A){var Q=(q-_*_-(X*=u)*X)/(2*_*X);Q<-1?Q=-1:Q>1&&(Q=1,o&&(f*=(Math.sqrt(q)/(_+X)-1)*l+1)),V=Math.acos(Q)*i,M=_+X*Q,I=X*Math.sin(V),C=Math.atan2(D*M-O*I,O*M+D*I)}else{var U=(M=u*X)*M,H=(I=d*X)*I,j=Math.atan2(D,O),G=-2*H*_,Z=H-U;if((T=G*G-4*Z*(S=H*_*_+U*q-U*H))>=0){var z=Math.sqrt(T);G<0&&(z=-z);var J=(z=-(G+z)/2)/Z,K=S/z,$=Math.abs(J)<Math.abs(K)?J:K;if($*$<=q){F=Math.sqrt(q-$*$)*i,C=j-Math.atan2(F,$),V=Math.atan2(F/d,($-_)/u);break t}}var tt=a.M8.PI,et=_-M,nt=et*et,at=0,rt=0,it=_+M,ot=it*it,st=0;(S=-M*_/(U-H))>=-1&&S<=1&&(S=Math.acos(S),(T=(P=M*Math.cos(S)+_)*P+(F=I*Math.sin(S))*F)<nt&&(tt=S,nt=T,et=P,at=F),T>ot&&(rt=S,ot=T,it=P,st=F)),q<=(nt+ot)/2?(C=j-Math.atan2(at*i,et),V=tt*i):(C=j-Math.atan2(st*i,it),V=rt*i)}var lt=Math.atan2(b,E)*y,ht=t.arotation;(C=(C-lt)*a.M8.radDeg+g-ht)>180?C-=360:C<-180&&(C+=360),t.updateWorldTransformWith(h,c,ht+C*l,f,t.ascaleY,0,0),ht=e.arotation,(V=((V+lt)*a.M8.radDeg-e.ashearX)*y+v-ht)>180?V-=360:V<-180&&(V+=360),e.updateWorldTransformWith(E,b,ht+V*l,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},t}(),J=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.bendDirection=1,n.compress=!1,n.stretch=!1,n.uniform=!1,n.mix=1,n.softness=0,n}return s(e,t),e}(j),K=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n}return s(e,t),e}(j);!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(B||(B={}));var $=function(){function t(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var n=0,a=t.bones.length;n<a;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof p){var n=this.rotateMix,r=this.translateMix,i=n>0;if(r>0||i){var o=this.data,s=o.spacingMode,l=s==B.Length,h=o.rotateMode,c=h==a.YK.Tangent,u=h==a.YK.ChainScale,f=this.bones.length,d=c?f:f+1,m=this.bones,g=a.cQ.setArraySize(this.spaces,d),v=null,y=this.spacing;if(u||l){u&&(v=a.cQ.setArraySize(this.lengths,f));for(var E=0,b=d-1;E<b;){var x=(k=m[E]).data.length;if(x<t.epsilon)u&&(v[E]=0),g[++E]=0;else{var w=x*k.matrix.a,M=x*k.matrix.b,I=Math.sqrt(w*w+M*M);u&&(v[E]=I),g[++E]=(l?x+y:y)*I/x}}}else for(E=1;E<d;E++)g[E]=y;var S=this.computeWorldPositions(e,d,c,o.positionMode==a.T.Percent,s==B.Percent),T=S[0],A=S[1],R=o.offsetRotation,C=!1;if(0==R)C=h==a.YK.Chain;else C=!1,R*=(V=this.target.bone.matrix).a*V.d-V.b*V.c>0?a.M8.degRad:-a.M8.degRad;E=0;for(var V=3;E<f;E++,V+=3){var k,P=(k=m[E]).matrix;P.tx+=(T-P.tx)*r,P.ty+=(A-P.ty)*r;var F=(w=S[V])-T,N=(M=S[V+1])-A;if(u){var Y=v[E];if(0!=Y){var _=(Math.sqrt(F*F+N*N)/Y-1)*n+1;P.a*=_,P.b*=_}}if(T=w,A=M,i){var X=P.a,O=P.c,D=P.b,q=P.d,L=0,W=0,Q=0;if(L=c?S[V-1]:0==g[E+1]?S[V+2]:Math.atan2(N,F),L-=Math.atan2(D,X),C){W=Math.cos(L),Q=Math.sin(L);var U=k.data.length;T+=(U*(W*X-Q*D)-F)*n,A+=(U*(Q*X+W*D)-N)*n}else L+=R;L>a.M8.PI?L-=a.M8.PI2:L<-a.M8.PI&&(L+=a.M8.PI2),L*=n,W=Math.cos(L),Q=Math.sin(L),P.a=W*X-Q*D,P.c=W*O-Q*q,P.b=Q*X+W*D,P.d=Q*O+W*q}k.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(e,n,r,i,o){var s=this.target,l=this.position,h=this.spaces,c=a.cQ.setArraySize(this.positions,3*n+2),u=null,f=e.closed,d=e.worldVerticesLength,p=d/6,m=t.NONE;if(!e.constantSpeed){var g=e.lengths,v=g[p-=f?1:2];if(i&&(l*=v),o)for(var y=0;y<n;y++)h[y]*=v;u=a.cQ.setArraySize(this.world,8);y=0;for(var E=0,b=0;y<n;y++,E+=3){var x=l+=U=h[y];if(f)(x%=v)<0&&(x+=v),b=0;else{if(x<0){m!=t.BEFORE&&(m=t.BEFORE,e.computeWorldVertices(s,2,4,u,0,2)),this.addBeforePosition(x,u,0,c,E);continue}if(x>v){m!=t.AFTER&&(m=t.AFTER,e.computeWorldVertices(s,d-6,4,u,0,2)),this.addAfterPosition(x-v,u,0,c,E);continue}}for(;;b++){var w=g[b];if(!(x>w)){if(0==b)x/=w;else x=(x-(Z=g[b-1]))/(w-Z);break}}b!=m&&(m=b,f&&b==p?(e.computeWorldVertices(s,d-4,4,u,0,2),e.computeWorldVertices(s,0,4,u,4,2)):e.computeWorldVertices(s,6*b+2,8,u,0,2)),this.addCurvePosition(x,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],c,E,r||y>0&&0==U)}return c}f?(d+=2,u=a.cQ.setArraySize(this.world,d),e.computeWorldVertices(s,2,d-4,u,0,2),e.computeWorldVertices(s,0,2,u,d-4,2),u[d-2]=u[0],u[d-1]=u[1]):(p--,d-=4,u=a.cQ.setArraySize(this.world,d),e.computeWorldVertices(s,2,d,u,0,2));for(var M=a.cQ.setArraySize(this.curves,p),I=0,S=u[0],T=u[1],A=0,R=0,C=0,V=0,k=0,P=0,F=0,N=0,Y=0,_=0,X=0,O=0,D=0,q=0,B=(y=0,2);y<p;y++,B+=6)A=u[B],R=u[B+1],C=u[B+2],V=u[B+3],X=2*(F=.1875*(S-2*A+C))+(Y=.09375*(3*(A-C)-S+(k=u[B+4]))),O=2*(N=.1875*(T-2*R+V))+(_=.09375*(3*(R-V)-T+(P=u[B+5]))),D=.75*(A-S)+F+.16666667*Y,q=.75*(R-T)+N+.16666667*_,I+=Math.sqrt(D*D+q*q),D+=X,q+=O,X+=Y,O+=_,I+=Math.sqrt(D*D+q*q),D+=X,q+=O,I+=Math.sqrt(D*D+q*q),D+=X+Y,q+=O+_,I+=Math.sqrt(D*D+q*q),M[y]=I,S=k,T=P;if(i&&(l*=I),o)for(y=0;y<n;y++)h[y]*=I;for(var L=this.segments,W=0,Q=(y=0,E=0,b=0,0);y<n;y++,E+=3){var U;x=l+=U=h[y];if(f)(x%=I)<0&&(x+=I),b=0;else{if(x<0){this.addBeforePosition(x,u,0,c,E);continue}if(x>I){this.addAfterPosition(x-I,u,d-4,c,E);continue}}for(;;b++){var H=M[b];if(!(x>H)){if(0==b)x/=H;else x=(x-(Z=M[b-1]))/(H-Z);break}}if(b!=m){m=b;var j=6*b;for(S=u[j],T=u[j+1],A=u[j+2],R=u[j+3],C=u[j+4],V=u[j+5],X=2*(F=.03*(S-2*A+C))+(Y=.006*(3*(A-C)-S+(k=u[j+6]))),O=2*(N=.03*(T-2*R+V))+(_=.006*(3*(R-V)-T+(P=u[j+7]))),D=.3*(A-S)+F+.16666667*Y,q=.3*(R-T)+N+.16666667*_,W=Math.sqrt(D*D+q*q),L[0]=W,j=1;j<8;j++)D+=X,q+=O,X+=Y,O+=_,W+=Math.sqrt(D*D+q*q),L[j]=W;D+=X,q+=O,W+=Math.sqrt(D*D+q*q),L[8]=W,D+=X+Y,q+=O+_,W+=Math.sqrt(D*D+q*q),L[9]=W,Q=0}for(x*=W;;Q++){var G=L[Q];if(!(x>G)){var Z;if(0==Q)x/=G;else x=Q+(x-(Z=L[Q-1]))/(G-Z);break}}this.addCurvePosition(.1*x,S,T,A,R,C,V,k,P,c,E,r||y>0&&0==U)}return c},t.prototype.addBeforePosition=function(t,e,n,a,r){var i=e[n],o=e[n+1],s=e[n+2]-i,l=e[n+3]-o,h=Math.atan2(l,s);a[r]=i+t*Math.cos(h),a[r+1]=o+t*Math.sin(h),a[r+2]=h},t.prototype.addAfterPosition=function(t,e,n,a,r){var i=e[n+2],o=e[n+3],s=i-e[n],l=o-e[n+1],h=Math.atan2(l,s);a[r]=i+t*Math.cos(h),a[r+1]=o+t*Math.sin(h),a[r+2]=h},t.prototype.addCurvePosition=function(t,e,n,a,r,i,o,s,l,h,c,u){(0==t||isNaN(t))&&(t=1e-4);var f=t*t,d=f*t,p=1-t,m=p*p,g=m*p,v=p*t,y=3*v,E=p*y,b=y*t,x=e*g+a*E+i*b+s*d,w=n*g+r*E+o*b+l*d;h[c]=x,h[c+1]=w,u&&(h[c+2]=Math.atan2(w-(n*m+r*v*2+o*f),x-(e*m+a*v*2+i*f)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),tt=function(){function t(t,e){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new a.Il,this.darkColor=null==t.darkColor?null:new a.Il,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),et=function(){function t(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new a.FM,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var n=0;n<t.bones.length;n++)this.bones.push(e.findBone(t.bones[n].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,s=o.a,l=o.c,h=o.b,c=o.d,u=s*c-l*h>0?a.M8.degRad:-a.M8.degRad,f=this.data.offsetRotation*u,d=this.data.offsetShearY*u,p=this.bones,m=0,g=p.length;m<g;m++){var v=p[m],y=!1,E=v.matrix;if(0!=t){var b=E.a,x=E.c,w=E.b,M=E.d;(C=Math.atan2(h,s)-Math.atan2(w,b)+f)>a.M8.PI?C-=a.M8.PI2:C<-a.M8.PI&&(C+=a.M8.PI2),C*=t;var I=Math.cos(C),S=Math.sin(C);E.a=I*b-S*w,E.c=I*x-S*M,E.b=S*b+I*w,E.d=S*x+I*M,y=!0}if(0!=e){var T=this.temp;i.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),E.tx+=(T.x-E.tx)*e,E.ty+=(T.y-E.ty)*e,y=!0}if(n>0){var A=Math.sqrt(E.a*E.a+E.b*E.b),R=Math.sqrt(s*s+h*h);A>1e-5&&(A=(A+(R-A+this.data.offsetScaleX)*n)/A),E.a*=A,E.b*=A,A=Math.sqrt(E.c*E.c+E.d*E.d),R=Math.sqrt(l*l+c*c),A>1e-5&&(A=(A+(R-A+this.data.offsetScaleY)*n)/A),E.c*=A,E.d*=A,y=!0}if(r>0){x=E.c,M=E.d;var C,V=Math.atan2(M,x);(C=Math.atan2(c,l)-Math.atan2(h,s)-(V-Math.atan2(E.b,E.a)))>a.M8.PI?C-=a.M8.PI2:C<-a.M8.PI&&(C+=a.M8.PI2),C=V+(C+d)*r;A=Math.sqrt(x*x+M*M);E.c=Math.cos(C)*A,E.d=Math.sin(C)*A,y=!0}y&&(v.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,r=this.shearMix,i=this.target,o=i.matrix,s=o.a,l=o.c,h=o.b,c=o.d,u=s*c-l*h>0?a.M8.degRad:-a.M8.degRad,f=this.data.offsetRotation*u,d=this.data.offsetShearY*u,p=this.bones,m=0,g=p.length;m<g;m++){var v=p[m],y=!1,E=v.matrix;if(0!=t){var b=E.a,x=E.c,w=E.b,M=E.d;(R=Math.atan2(h,s)+f)>a.M8.PI?R-=a.M8.PI2:R<-a.M8.PI&&(R+=a.M8.PI2),R*=t;var I=Math.cos(R),S=Math.sin(R);E.a=I*b-S*w,E.c=I*x-S*M,E.b=S*b+I*w,E.d=S*x+I*M,y=!0}if(0!=e){var T=this.temp;i.localToWorld(T.set(this.data.offsetX,this.data.offsetY)),E.tx+=T.x*e,E.ty+=T.y*e,y=!0}if(n>0){var A=(Math.sqrt(s*s+h*h)-1+this.data.offsetScaleX)*n+1;E.a*=A,E.b*=A,A=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleY)*n+1,E.c*=A,E.d*=A,y=!0}if(r>0){var R;(R=Math.atan2(c,l)-Math.atan2(h,s))>a.M8.PI?R-=a.M8.PI2:R<-a.M8.PI&&(R+=a.M8.PI2);x=E.c,M=E.d;R=Math.atan2(M,x)+(R-a.M8.PI/2+d)*r;A=Math.sqrt(x*x+M*M);E.c=Math.cos(R)*A,E.d=Math.sin(R)*A,y=!0}y&&(v.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,a=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var i=this.bones,o=0,s=i.length;o<s;o++){var l=i[o];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;if(0!=t){var c=r.arotation-h+this.data.offsetRotation;h+=(c-=360*(16384-(16384.499999999996-c/360|0)))*t}var u=l.ax,f=l.ay;0!=e&&(u+=(r.ax-u+this.data.offsetX)*e,f+=(r.ay-f+this.data.offsetY)*e);var d=l.ascaleX,p=l.ascaleY;n>0&&(d>1e-5&&(d=(d+(r.ascaleX-d+this.data.offsetScaleX)*n)/d),p>1e-5&&(p=(p+(r.ascaleY-p+this.data.offsetScaleY)*n)/p));var m=l.ashearY;if(a>0){c=r.ashearY-m+this.data.offsetShearY;c-=360*(16384-(16384.499999999996-c/360|0)),l.shearY+=c*a}l.updateWorldTransformWith(u,f,h,d,p,l.ashearX,m)}},t.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,n=this.scaleMix,a=this.shearMix,r=this.target;r.appliedValid||r.updateAppliedTransform();for(var i=this.bones,o=0,s=i.length;o<s;o++){var l=i[o];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;0!=t&&(h+=(r.arotation+this.data.offsetRotation)*t);var c=l.ax,u=l.ay;0!=e&&(c+=(r.ax+this.data.offsetX)*e,u+=(r.ay+this.data.offsetY)*e);var f=l.ascaleX,d=l.ascaleY;n>0&&(f>1e-5&&(f*=(r.ascaleX-1+this.data.offsetScaleX)*n+1),d>1e-5&&(d*=(r.ascaleY-1+this.data.offsetScaleY)*n+1));var p=l.ashearY;a>0&&(p+=(r.ashearY+this.data.offsetShearY)*a),l.updateWorldTransformWith(c,u,h,f,d,l.ashearX,p)}},t}(),nt=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var n=t.bones[e],r=void 0;if(null==n.parent)r=new U(n,this,null);else{var i=this.bones[n.parent.index];r=new U(n,this,i),i.children.push(r)}this.bones.push(r)}this.slots=new Array,this.drawOrder=new Array;for(e=0;e<t.slots.length;e++){var o=t.slots[e],s=(r=this.bones[o.boneData.index],new tt(o,r));this.slots.push(s),this.drawOrder.push(s)}this.ikConstraints=new Array;for(e=0;e<t.ikConstraints.length;e++){var l=t.ikConstraints[e];this.ikConstraints.push(new z(l,this))}this.transformConstraints=new Array;for(e=0;e<t.transformConstraints.length;e++){var h=t.transformConstraints[e];this.transformConstraints.push(new et(h,this))}this.pathConstraints=new Array;for(e=0;e<t.pathConstraints.length;e++){var c=t.pathConstraints[e];this.pathConstraints.push(new $(c,this))}this.color=new a.Il(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,n=t.length;e<n;e++){(r=t[e]).sorted=r.data.skinRequired,r.active=!r.sorted}if(null!=this.skin){var a=this.skin.bones;for(e=0,n=this.skin.bones.length;e<n;e++){var r=this.bones[a[e].index];do{r.sorted=!1,r.active=!0,r=r.parent}while(null!=r)}}var i=this.ikConstraints,o=this.transformConstraints,s=this.pathConstraints,l=i.length,h=o.length,c=s.length,u=l+h+c;t:for(e=0;e<u;e++){for(var f=0;f<l;f++){if((d=i[f]).data.order==e){this.sortIkConstraint(d);continue t}}for(f=0;f<h;f++){if((d=o[f]).data.order==e){this.sortTransformConstraint(d);continue t}}for(f=0;f<c;f++){var d;if((d=s[f]).data.order==e){this.sortPathConstraint(d);continue t}}}for(e=0,n=t.length;e<n;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&a.cQ.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var n=t.bones,r=n[0];if(this.sortBone(r),n.length>1){var i=n[n.length-1];this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}this._updateCache.push(t),this.sortReset(r.children),n[n.length-1].sorted=!0}},t.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||null!=this.skin&&a.cQ.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,n=e.data.index,r=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,n,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,n,r);for(var i=0,o=this.data.skins.length;i<o;i++)this.sortPathConstraintAttachment(this.data.skins[i],n,r);var s=e.getAttachment();s instanceof p&&this.sortPathConstraintAttachmentWith(s,r);var l=t.bones,h=l.length;for(i=0;i<h;i++)this.sortBone(l[i]);this._updateCache.push(t);for(i=0;i<h;i++)this.sortReset(l[i].children);for(i=0;i<h;i++)l[i].sorted=!0}},t.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&a.cQ.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,n=e.length;if(t.data.local)for(var r=0;r<n;r++){var i=e[r];this.sortBone(i.parent),this._updateCache.indexOf(i)>-1||this.updateCacheReset.push(i)}else for(r=0;r<n;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var o=0;o<n;o++)this.sortReset(e[o].children);for(o=0;o<n;o++)e[o].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(t,e,n){var a=t.attachments[e];if(a)for(var r in a)this.sortPathConstraintAttachmentWith(a[r],n)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof p){var n=t.bones;if(null==n)this.sortBone(e);else for(var a=this.bones,r=0;r<n.length;)for(var i=n[r++],o=r+i;r<o;r++){var s=n[r];this.sortBone(a[s])}}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,n=t.length;e<n;e++){var a=t[e];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,n=t.length;e<n;e++){var a=t[e];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}var r=this._updateCache;for(e=0,n=r.length;e<n;e++)r[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,n=t.length;e<n;e++)t[e].setToSetupPose();var a=this.ikConstraints;for(e=0,n=a.length;e<n;e++){(s=a[e]).mix=s.data.mix,s.softness=s.data.softness,s.bendDirection=s.data.bendDirection,s.compress=s.data.compress,s.stretch=s.data.stretch}var r=this.transformConstraints;for(e=0,n=r.length;e<n;e++){var i=(s=r[e]).data;s.rotateMix=i.rotateMix,s.translateMix=i.translateMix,s.scaleMix=i.scaleMix,s.shearMix=i.shearMix}var o=this.pathConstraints;for(e=0,n=o.length;e<n;e++){var s;i=(s=o[e]).data;s.position=i.position,s.spacing=i.spacing,s.rotateMix=i.rotateMix,s.translateMix=i.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;a.cQ.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,n=t.length;e<n;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++)if(e[n].data.name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++)if(e[n].data.name==t)return n;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,n=0,a=e.length;n<a;n++){var r=e[n],i=r.data.attachmentName;if(null!=i){var o=t.getAttachment(n,i);null!=o&&r.setAttachment(o)}}this.skin=t,this.updateCache()}},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var n=this.skin.getAttachment(t,e);if(null!=n)return n}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var n=this.slots,a=0,r=n.length;a<r;a++){var i=n[a];if(i.data.name==t){var o=null;if(null!=e&&null==(o=this.getAttachment(a,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void i.setAttachment(o)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.data.name==t)return r}return null},t.prototype.getBounds=function(t,e,n){if(void 0===n&&(n=new Array(2)),null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var r=this.drawOrder,i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=0,c=r.length;h<c;h++){var u=r[h];if(u.bone.active){var f=0,p=null,m=u.getAttachment();if(m instanceof g)f=8,p=a.cQ.setArraySize(n,f,0),m.computeWorldVertices(u.bone,p,0,2);else if(m instanceof d){var v=m;f=v.worldVerticesLength,p=a.cQ.setArraySize(n,f,0),v.computeWorldVertices(u,0,f,p,0,2)}if(null!=p)for(var y=0,E=p.length;y<E;y+=2){var b=p[y],x=p[y+1];i=Math.min(i,b),o=Math.min(o,x),s=Math.max(s,b),l=Math.max(l,x)}}}t.set(i,o),e.set(s-i,l-o)},t.prototype.update=function(t){this.time+=t},Object.defineProperty(t.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),at=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,n=0,a=e.length;n<a;n++)if(e[n].name==t)return n;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,n=0,a=e.length;n<a;n++)if(e[n].name==t)return n;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,n=0,a=e.length;n<a;n++){var r=e[n];if(r.name==t)return r}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,n=0,a=e.length;n<a;n++)if(e[n].name==t)return n;return-1},t}(),rt=function(t,e,n){if(this.color=new a.Il(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==n)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=n},it=function(t){function e(e){var n=t.call(this,e,0,!1)||this;return n.bones=new Array,n.rotateMix=0,n.translateMix=0,n.scaleMix=0,n.shearMix=0,n.offsetRotation=0,n.offsetX=0,n.offsetY=0,n.offsetScaleX=0,n.offsetScaleY=0,n.offsetShearY=0,n.relative=!1,n.local=!1,n}return s(e,t),e}(j),ot=function(t,e,n){this.slotIndex=t,this.name=e,this.attachment=n},st=function(){function t(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.setAttachment=function(t,e,n){if(null==n)throw new Error("attachment cannot be null.");var a=this.attachments;t>=a.length&&(a.length=t+1),a[t]||(a[t]={}),a[t][e]=n},t.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],a=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){a=!0;break}a||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var i=t.constraints[e];for(a=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==i){a=!0;break}a||this.constraints.push(i)}var o=t.getAttachments();for(e=0;e<o.length;e++){var s=o[e];this.setAttachment(s.slotIndex,s.name,s.attachment)}},t.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var n=t.bones[e],a=!1,r=0;r<this.bones.length;r++)if(this.bones[r]==n){a=!0;break}a||this.bones.push(n)}for(e=0;e<t.constraints.length;e++){var i=t.constraints[e];for(a=!1,r=0;r<this.constraints.length;r++)if(this.constraints[r]==i){a=!0;break}a||this.constraints.push(i)}var o=t.getAttachments();for(e=0;e<o.length;e++){var s=o[e];null!=s.attachment&&(s.attachment instanceof d?(s.attachment=s.attachment.newLinkedMesh(),this.setAttachment(s.slotIndex,s.name,s.attachment)):(s.attachment=s.attachment.copy(),this.setAttachment(s.slotIndex,s.name,s.attachment)))}},t.prototype.getAttachment=function(t,e){var n=this.attachments[t];return n?n[e]:null},t.prototype.removeAttachment=function(t,e){var n=this.attachments[t];n&&(n[e]=null)},t.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var n=this.attachments[e];if(n)for(var a in n){var r=n[a];r&&t.push(new ot(e,a,r))}}return t},t.prototype.getAttachmentsForSlot=function(t,e){var n=this.attachments[t];if(n)for(var a in n){var r=n[a];r&&e.push(new ot(t,a,r))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(t,e){for(var n=0,a=0;a<t.slots.length;a++){var r=t.slots[a],i=r.getAttachment();if(i&&n<e.attachments.length){var o=e.attachments[n];for(var s in o){if(i==o[s]){var l=this.getAttachment(n,s);null!=l&&r.setAttachment(l);break}}}n++}},t}(),lt=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var n=this.scale,r=new at;r.name="";var i=new a.YT(e);if(r.hash=i.readString(),r.version=i.readString(),"3.8.75"===r.version){console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.")}r.x=i.readFloat(),r.y=i.readFloat(),r.width=i.readFloat(),r.height=i.readFloat();var o=i.readBoolean();o&&(r.fps=i.readFloat(),r.imagesPath=i.readString(),r.audioPath=i.readString());var s=0;s=i.readInt(!0);for(var l=0;l<s;l++)i.strings.push(i.readString());s=i.readInt(!0);for(l=0;l<s;l++){var h=i.readString(),c=0==l?null:r.bones[i.readInt(!0)];(d=new H(l,h,c)).rotation=i.readFloat(),d.x=i.readFloat()*n,d.y=i.readFloat()*n,d.scaleX=i.readFloat(),d.scaleY=i.readFloat(),d.shearX=i.readFloat(),d.shearY=i.readFloat(),d.length=i.readFloat()*n,d.transformMode=t.TransformModeValues[i.readInt(!0)],d.skinRequired=i.readBoolean(),o&&a.Il.rgba8888ToColor(d.color,i.readInt32()),r.bones.push(d)}s=i.readInt(!0);for(l=0;l<s;l++){var u=i.readString(),f=r.bones[i.readInt(!0)],d=new rt(l,u,f);a.Il.rgba8888ToColor(d.color,i.readInt32());var p=i.readInt32();-1!=p&&a.Il.rgb888ToColor(d.darkColor=new a.Il,p),d.attachmentName=i.readStringRef(),d.blendMode=t.BlendModeValues[i.readInt(!0)],r.slots.push(d)}s=i.readInt(!0);l=0;for(var m=void 0;l<s;l++){(d=new J(i.readString())).order=i.readInt(!0),d.skinRequired=i.readBoolean(),m=i.readInt(!0);for(var g=0;g<m;g++)d.bones.push(r.bones[i.readInt(!0)]);d.target=r.bones[i.readInt(!0)],d.mix=i.readFloat(),d.softness=i.readFloat()*n,d.bendDirection=i.readByte(),d.compress=i.readBoolean(),d.stretch=i.readBoolean(),d.uniform=i.readBoolean(),r.ikConstraints.push(d)}s=i.readInt(!0);for(l=0,m=void 0;l<s;l++){(d=new it(i.readString())).order=i.readInt(!0),d.skinRequired=i.readBoolean(),m=i.readInt(!0);for(g=0;g<m;g++)d.bones.push(r.bones[i.readInt(!0)]);d.target=r.bones[i.readInt(!0)],d.local=i.readBoolean(),d.relative=i.readBoolean(),d.offsetRotation=i.readFloat(),d.offsetX=i.readFloat()*n,d.offsetY=i.readFloat()*n,d.offsetScaleX=i.readFloat(),d.offsetScaleY=i.readFloat(),d.offsetShearY=i.readFloat(),d.rotateMix=i.readFloat(),d.translateMix=i.readFloat(),d.scaleMix=i.readFloat(),d.shearMix=i.readFloat(),r.transformConstraints.push(d)}s=i.readInt(!0);for(l=0,m=void 0;l<s;l++){(d=new K(i.readString())).order=i.readInt(!0),d.skinRequired=i.readBoolean(),m=i.readInt(!0);for(g=0;g<m;g++)d.bones.push(r.bones[i.readInt(!0)]);d.target=r.slots[i.readInt(!0)],d.positionMode=t.PositionModeValues[i.readInt(!0)],d.spacingMode=t.SpacingModeValues[i.readInt(!0)],d.rotateMode=t.RotateModeValues[i.readInt(!0)],d.offsetRotation=i.readFloat(),d.position=i.readFloat(),d.positionMode==a.T.Fixed&&(d.position*=n),d.spacing=i.readFloat(),d.spacingMode!=B.Length&&d.spacingMode!=B.Fixed||(d.spacing*=n),d.rotateMix=i.readFloat(),d.translateMix=i.readFloat(),r.pathConstraints.push(d)}var v=this.readSkin(i,r,!0,o);null!=v&&(r.defaultSkin=v,r.skins.push(v));l=r.skins.length;for(a.cQ.setArraySize(r.skins,s=l+i.readInt(!0));l<s;l++)r.skins[l]=this.readSkin(i,r,!1,o);s=this.linkedMeshes.length;for(l=0;l<s;l++){var y=this.linkedMeshes[l],E=null==y.skin?r.defaultSkin:r.findSkin(y.skin);if(null==E)throw new Error("Skin not found: "+y.skin);var b=E.getAttachment(y.slotIndex,y.parent);if(null==b)throw new Error("Parent mesh not found: "+y.parent);y.mesh.deformAttachment=y.inheritDeform?b:y.mesh,y.mesh.setParentMesh(b)}this.linkedMeshes.length=0,s=i.readInt(!0);for(l=0;l<s;l++){(d=new Z(i.readStringRef())).intValue=i.readInt(!1),d.floatValue=i.readFloat(),d.stringValue=i.readString(),d.audioPath=i.readString(),null!=d.audioPath&&(d.volume=i.readFloat(),d.balance=i.readFloat()),r.events.push(d)}s=i.readInt(!0);for(l=0;l<s;l++)r.animations.push(this.readAnimation(i,i.readString(),r));return r},t.prototype.readSkin=function(t,e,n,a){var r=null,i=0;if(n){if(0==(i=t.readInt(!0)))return null;r=new st("default")}else{(r=new st(t.readStringRef())).bones.length=t.readInt(!0);for(var o=0,s=r.bones.length;o<s;o++)r.bones[o]=e.bones[t.readInt(!0)];for(o=0,s=t.readInt(!0);o<s;o++)r.constraints.push(e.ikConstraints[t.readInt(!0)]);for(o=0,s=t.readInt(!0);o<s;o++)r.constraints.push(e.transformConstraints[t.readInt(!0)]);for(o=0,s=t.readInt(!0);o<s;o++)r.constraints.push(e.pathConstraints[t.readInt(!0)]);i=t.readInt(!0)}for(o=0;o<i;o++)for(var l=t.readInt(!0),h=0,c=t.readInt(!0);h<c;h++){var u=t.readStringRef(),f=this.readAttachment(t,e,r,l,u,a);null!=f&&r.setAttachment(l,u,f)}return r},t.prototype.readAttachment=function(e,n,r,i,o,s){var l=this.scale,h=e.readStringRef();null==h&&(h=o);var c=e.readByte();switch(t.AttachmentTypeValues[c]){case a.sf.Region:var u=e.readStringRef(),f=e.readFloat(),d=e.readFloat(),p=e.readFloat(),m=e.readFloat(),g=e.readFloat(),v=e.readFloat(),y=e.readFloat(),E=e.readInt32();null==u&&(u=h);var b=this.attachmentLoader.newRegionAttachment(r,h,u);return null==b?null:(b.path=u,b.x=d*l,b.y=p*l,b.scaleX=m,b.scaleY=g,b.rotation=f,b.width=v*l,b.height=y*l,a.Il.rgba8888ToColor(b.color,E),b);case a.sf.BoundingBox:var x=e.readInt(!0),w=this.readVertices(e,x),M=(E=s?e.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(r,h));return null==M?null:(M.worldVerticesLength=x<<1,M.vertices=w.vertices,M.bones=w.bones,s&&a.Il.rgba8888ToColor(M.color,E),M);case a.sf.Mesh:u=e.readStringRef(),E=e.readInt32(),x=e.readInt(!0);var I=this.readFloatArray(e,x<<1,1),S=this.readShortArray(e),T=(w=this.readVertices(e,x),e.readInt(!0)),A=null;v=0,y=0;return s&&(A=this.readShortArray(e),v=e.readFloat(),y=e.readFloat()),null==u&&(u=h),null==(R=this.attachmentLoader.newMeshAttachment(r,h,u))?null:(R.path=u,a.Il.rgba8888ToColor(R.color,E),R.bones=w.bones,R.vertices=w.vertices,R.worldVerticesLength=x<<1,R.triangles=S,R.regionUVs=new Float32Array(I),R.hullLength=T<<1,s&&(R.edges=A,R.width=v*l,R.height=y*l),R);case a.sf.LinkedMesh:u=e.readStringRef(),E=e.readInt32();var R,C=e.readStringRef(),V=e.readStringRef(),k=e.readBoolean();v=0,y=0;return s&&(v=e.readFloat(),y=e.readFloat()),null==u&&(u=h),null==(R=this.attachmentLoader.newMeshAttachment(r,h,u))?null:(R.path=u,a.Il.rgba8888ToColor(R.color,E),s&&(R.width=v*l,R.height=y*l),this.linkedMeshes.push(new ht(R,C,i,V,k)),R);case a.sf.Path:for(var P=e.readBoolean(),F=e.readBoolean(),N=(x=e.readInt(!0),w=this.readVertices(e,x),a.cQ.newArray(x/3,0)),Y=0,_=N.length;Y<_;Y++)N[Y]=e.readFloat()*l;E=s?e.readInt32():0;return null==(u=this.attachmentLoader.newPathAttachment(r,h))?null:(u.closed=P,u.constantSpeed=F,u.worldVerticesLength=x<<1,u.vertices=w.vertices,u.bones=w.bones,u.lengths=N,s&&a.Il.rgba8888ToColor(u.color,E),u);case a.sf.Point:f=e.readFloat(),d=e.readFloat(),p=e.readFloat(),E=s?e.readInt32():0;var X=this.attachmentLoader.newPointAttachment(r,h);return null==X?null:(X.x=d*l,X.y=p*l,X.rotation=f,s&&a.Il.rgba8888ToColor(X.color,E),X);case a.sf.Clipping:var O=e.readInt(!0),D=(x=e.readInt(!0),w=this.readVertices(e,x),E=s?e.readInt32():0,this.attachmentLoader.newClippingAttachment(r,h));return null==D?null:(D.endSlot=n.slots[O],D.worldVerticesLength=x<<1,D.vertices=w.vertices,D.bones=w.bones,s&&a.Il.rgba8888ToColor(D.color,E),D)}return null},t.prototype.readVertices=function(t,e){var n=e<<1,r=new ct,i=this.scale;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,n,i),r;for(var o=new Array,s=new Array,l=0;l<e;l++){var h=t.readInt(!0);s.push(h);for(var c=0;c<h;c++)s.push(t.readInt(!0)),o.push(t.readFloat()*i),o.push(t.readFloat()*i),o.push(t.readFloat())}return r.vertices=a.cQ.toFloatArray(o),r.bones=s,r},t.prototype.readFloatArray=function(t,e,n){var a=new Array(e);if(1==n)for(var r=0;r<e;r++)a[r]=t.readFloat();else for(r=0;r<e;r++)a[r]=t.readFloat()*n;return a},t.prototype.readShortArray=function(t){for(var e=t.readInt(!0),n=new Array(e),a=0;a<e;a++)n[a]=t.readShort();return n},t.prototype.readAnimation=function(e,n,r){for(var i=new Array,o=this.scale,s=0,l=new a.Il,h=new a.Il,c=0,u=e.readInt(!0);c<u;c++)for(var f=e.readInt(!0),d=0,p=e.readInt(!0);d<p;d++){var m=e.readByte(),g=e.readInt(!0);switch(m){case t.SLOT_ATTACHMENT:(x=new R(g)).slotIndex=f;for(var v=0;v<g;v++)x.setFrame(v,e.readFloat(),e.readStringRef());i.push(x),s=Math.max(s,x.frames[g-1]);break;case t.SLOT_COLOR:(x=new T(g)).slotIndex=f;for(v=0;v<g;v++){var y=e.readFloat();a.Il.rgba8888ToColor(l,e.readInt32()),x.setFrame(v,y,l.r,l.g,l.b,l.a),v<g-1&&this.readCurve(e,v,x)}i.push(x),s=Math.max(s,x.frames[(g-1)*T.ENTRIES]);break;case t.SLOT_TWO_COLOR:(x=new A(g)).slotIndex=f;for(v=0;v<g;v++){y=e.readFloat();a.Il.rgba8888ToColor(l,e.readInt32()),a.Il.rgb888ToColor(h,e.readInt32()),x.setFrame(v,y,l.r,l.g,l.b,l.a,h.r,h.g,h.b),v<g-1&&this.readCurve(e,v,x)}i.push(x),s=Math.max(s,x.frames[(g-1)*A.ENTRIES])}}for(c=0,u=e.readInt(!0);c<u;c++){var b=e.readInt(!0);for(d=0,p=e.readInt(!0);d<p;d++){m=e.readByte(),g=e.readInt(!0);switch(m){case t.BONE_ROTATE:(x=new w(g)).boneIndex=b;for(v=0;v<g;v++)x.setFrame(v,e.readFloat(),e.readFloat()),v<g-1&&this.readCurve(e,v,x);i.push(x),s=Math.max(s,x.frames[(g-1)*w.ENTRIES]);break;case t.BONE_TRANSLATE:case t.BONE_SCALE:case t.BONE_SHEAR:var x=void 0,C=1;m==t.BONE_SCALE?x=new I(g):m==t.BONE_SHEAR?x=new S(g):(x=new M(g),C=o),x.boneIndex=b;for(v=0;v<g;v++)x.setFrame(v,e.readFloat(),e.readFloat()*C,e.readFloat()*C),v<g-1&&this.readCurve(e,v,x);i.push(x),s=Math.max(s,x.frames[(g-1)*M.ENTRIES])}}}for(c=0,u=e.readInt(!0);c<u;c++){var O=e.readInt(!0);g=e.readInt(!0);(x=new F(g)).ikConstraintIndex=O;for(v=0;v<g;v++)x.setFrame(v,e.readFloat(),e.readFloat(),e.readFloat()*o,e.readByte(),e.readBoolean(),e.readBoolean()),v<g-1&&this.readCurve(e,v,x);i.push(x),s=Math.max(s,x.frames[(g-1)*F.ENTRIES])}for(c=0,u=e.readInt(!0);c<u;c++){O=e.readInt(!0),g=e.readInt(!0);(x=new N(g)).transformConstraintIndex=O;for(v=0;v<g;v++)x.setFrame(v,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()),v<g-1&&this.readCurve(e,v,x);i.push(x),s=Math.max(s,x.frames[(g-1)*N.ENTRIES])}for(c=0,u=e.readInt(!0);c<u;c++){O=e.readInt(!0);var D=r.pathConstraints[O];for(d=0,p=e.readInt(!0);d<p;d++){m=e.readByte(),g=e.readInt(!0);switch(m){case t.PATH_POSITION:case t.PATH_SPACING:x=void 0,C=1;m==t.PATH_SPACING?(x=new _(g),D.spacingMode!=B.Length&&D.spacingMode!=B.Fixed||(C=o)):(x=new Y(g),D.positionMode==a.T.Fixed&&(C=o)),x.pathConstraintIndex=O;for(v=0;v<g;v++)x.setFrame(v,e.readFloat(),e.readFloat()*C),v<g-1&&this.readCurve(e,v,x);i.push(x),s=Math.max(s,x.frames[(g-1)*Y.ENTRIES]);break;case t.PATH_MIX:(x=new X(g)).pathConstraintIndex=O;for(v=0;v<g;v++)x.setFrame(v,e.readFloat(),e.readFloat(),e.readFloat()),v<g-1&&this.readCurve(e,v,x);i.push(x),s=Math.max(s,x.frames[(g-1)*X.ENTRIES])}}}for(c=0,u=e.readInt(!0);c<u;c++){var q=r.skins[e.readInt(!0)];for(d=0,p=e.readInt(!0);d<p;d++){f=e.readInt(!0);for(var L=0,W=e.readInt(!0);L<W;L++){var Q=q.getAttachment(f,e.readStringRef()),U=null!=Q.bones,H=Q.vertices,j=U?H.length/3*2:H.length;g=e.readInt(!0);(x=new V(g)).slotIndex=f,x.attachment=Q;for(v=0;v<g;v++){y=e.readFloat();var Z=void 0,z=e.readInt(!0);if(0==z)Z=U?a.cQ.newFloatArray(j):H;else{Z=a.cQ.newFloatArray(j);var J=e.readInt(!0);if(z+=J,1==o)for(var K=J;K<z;K++)Z[K]=e.readFloat();else for(K=J;K<z;K++)Z[K]=e.readFloat()*o;if(!U){K=0;for(var $=Z.length;K<$;K++)Z[K]+=H[K]}}x.setFrame(v,y,Z),v<g-1&&this.readCurve(e,v,x)}i.push(x),s=Math.max(s,x.frames[g-1])}}}var tt=e.readInt(!0);if(tt>0){x=new P(tt);var et=r.slots.length;for(c=0;c<tt;c++){y=e.readFloat();var nt=e.readInt(!0),at=a.cQ.newArray(et,0);for(d=et-1;d>=0;d--)at[d]=-1;var rt=a.cQ.newArray(et-nt,0),it=0,ot=0;for(d=0;d<nt;d++){for(f=e.readInt(!0);it!=f;)rt[ot++]=it++;at[it+e.readInt(!0)]=it++}for(;it<et;)rt[ot++]=it++;for(d=et-1;d>=0;d--)-1==at[d]&&(at[d]=rt[--ot]);x.setFrame(c,y,at)}i.push(x),s=Math.max(s,x.frames[tt-1])}var st=e.readInt(!0);if(st>0){for(x=new k(st),c=0;c<st;c++){y=e.readFloat();var lt=r.events[e.readInt(!0)],ht=new G(y,lt);ht.intValue=e.readInt(!1),ht.floatValue=e.readFloat(),ht.stringValue=e.readBoolean()?e.readString():lt.stringValue,null!=ht.data.audioPath&&(ht.volume=e.readFloat(),ht.balance=e.readFloat()),x.setFrame(c,ht)}i.push(x),s=Math.max(s,x.frames[st-1])}return new E(n,i,s)},t.prototype.readCurve=function(e,n,a){switch(e.readByte()){case t.CURVE_STEPPED:a.setStepped(n);break;case t.CURVE_BEZIER:this.setCurve(a,n,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat())}},t.prototype.setCurve=function(t,e,n,a,r,i){t.setCurve(e,n,a,r,i)},t.AttachmentTypeValues=[0,1,2,3,4,5,6],t.TransformModeValues=[a.Qe.Normal,a.Qe.OnlyTranslation,a.Qe.NoRotationOrReflection,a.Qe.NoScale,a.Qe.NoScaleOrReflection],t.PositionModeValues=[a.T.Fixed,a.T.Percent],t.SpacingModeValues=[B.Length,B.Fixed,B.Percent],t.RotateModeValues=[a.YK.Tangent,a.YK.Chain,a.YK.ChainScale],t.BlendModeValues=[i.T$.NORMAL,i.T$.ADD,i.T$.MULTIPLY,i.T$.SCREEN],t.BONE_ROTATE=0,t.BONE_TRANSLATE=1,t.BONE_SCALE=2,t.BONE_SHEAR=3,t.SLOT_ATTACHMENT=0,t.SLOT_COLOR=1,t.SLOT_TWO_COLOR=2,t.PATH_POSITION=0,t.PATH_SPACING=1,t.PATH_MIX=2,t.CURVE_LINEAR=0,t.CURVE_STEPPED=1,t.CURVE_BEZIER=2,t}(),ht=function(t,e,n,a,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=a,this.inheritDeform=r},ct=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e},ut=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new a.Kg((function(){return a.cQ.newFloatArray(16)}))}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var n=this.boundingBoxes,r=this.polygons,i=this.polygonPool,o=t.slots,s=o.length;n.length=0,i.freeAll(r),r.length=0;for(var l=0;l<s;l++){var h=o[l];if(h.bone.active){var c=h.getAttachment();if(c instanceof u){var f=c;n.push(f);var d=i.obtain();d.length!=f.worldVerticesLength&&(d=a.cQ.newFloatArray(f.worldVerticesLength)),r.push(d),f.computeWorldVertices(h,0,f.worldVerticesLength,d,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,r=this.polygons,i=0,o=r.length;i<o;i++)for(var s=r[i],l=s,h=0,c=s.length;h<c;h+=2){var u=l[h],f=l[h+1];t=Math.min(t,u),e=Math.min(e,f),n=Math.max(n,u),a=Math.max(a,f)}this.minX=t,this.minY=e,this.maxX=n,this.maxY=a},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,n,a){var r=this.minX,i=this.minY,o=this.maxX,s=this.maxY;if(t<=r&&n<=r||e<=i&&a<=i||t>=o&&n>=o||e>=s&&a>=s)return!1;var l=(a-e)/(n-t),h=l*(r-t)+e;if(h>i&&h<s)return!0;if((h=l*(o-t)+e)>i&&h<s)return!0;var c=(i-e)/l+t;return c>r&&c<o||(c=(s-e)/l+t)>r&&c<o},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var n=this.polygons,a=0,r=n.length;a<r;a++)if(this.containsPointPolygon(n[a],t,e))return this.boundingBoxes[a];return null},t.prototype.containsPointPolygon=function(t,e,n){for(var a=t,r=t.length,i=r-2,o=!1,s=0;s<r;s+=2){var l=a[s+1],h=a[i+1];if(l<n&&h>=n||h<n&&l>=n){var c=a[s];c+(n-l)/(h-l)*(a[i]-c)<e&&(o=!o)}i=s}return o},t.prototype.intersectsSegment=function(t,e,n,a){for(var r=this.polygons,i=0,o=r.length;i<o;i++)if(this.intersectsSegmentPolygon(r[i],t,e,n,a))return this.boundingBoxes[i];return null},t.prototype.intersectsSegmentPolygon=function(t,e,n,a,r){for(var i=t,o=t.length,s=e-a,l=n-r,h=e*r-n*a,c=i[o-2],u=i[o-1],f=0;f<o;f+=2){var d=i[f],p=i[f+1],m=c*p-u*d,g=c-d,v=u-p,y=s*v-l*g,E=(h*g-s*m)/y;if((E>=c&&E<=d||E>=d&&E<=c)&&(E>=e&&E<=a||E>=a&&E<=e)){var b=(h*v-l*m)/y;if((b>=u&&b<=p||b>=p&&b<=u)&&(b>=n&&b<=r||b>=r&&b<=n))return!0}c=d,u=p}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),ft=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var n=this.scale,r=new at,i="string"===typeof e?JSON.parse(e):e,o=i.skeleton;if(null!=o){if(r.hash=o.hash,r.version=o.spine,"3.8"!==r.version.substr(0,3)){var s="Spine 3.8 loader cant load version "+o.spine+". Please configure your pixi-spine bundle";console.error(s)}if("3.8.75"===r.version){s="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(s)}r.x=o.x,r.y=o.y,r.width=o.width,r.height=o.height,r.fps=o.fps,r.imagesPath=o.images}if(i.bones)for(var l=0;l<i.bones.length;l++){var h=i.bones[l],c=null,u=this.getValue(h,"parent",null);if(null!=u&&null==(c=r.findBone(u)))throw new Error("Parent bone not found: "+u);(m=new H(r.bones.length,h.name,c)).length=this.getValue(h,"length",0)*n,m.x=this.getValue(h,"x",0)*n,m.y=this.getValue(h,"y",0)*n,m.rotation=this.getValue(h,"rotation",0),m.scaleX=this.getValue(h,"scaleX",1),m.scaleY=this.getValue(h,"scaleY",1),m.shearX=this.getValue(h,"shearX",0),m.shearY=this.getValue(h,"shearY",0),m.transformMode=t.transformModeFromString(this.getValue(h,"transform","normal")),m.skinRequired=this.getValue(h,"skin",!1),r.bones.push(m)}if(i.slots)for(l=0;l<i.slots.length;l++){var f=(A=i.slots[l]).name,d=A.bone,p=r.findBone(d);if(null==p)throw new Error("Slot bone not found: "+d);var m=new rt(r.slots.length,f,p),g=this.getValue(A,"color",null);null!=g&&m.color.setFromString(g);var v=this.getValue(A,"dark",null);null!=v&&(m.darkColor=new a.Il(1,1,1,1),m.darkColor.setFromString(v)),m.attachmentName=this.getValue(A,"attachment",null),m.blendMode=t.blendModeFromString(this.getValue(A,"blend","normal")),r.slots.push(m)}if(i.ik)for(l=0;l<i.ik.length;l++){var y=i.ik[l];(m=new J(y.name)).order=this.getValue(y,"order",0),m.skinRequired=this.getValue(y,"skin",!1);for(var E=0;E<y.bones.length;E++){d=y.bones[E];if(null==(I=r.findBone(d)))throw new Error("IK bone not found: "+d);m.bones.push(I)}var b=y.target;if(m.target=r.findBone(b),null==m.target)throw new Error("IK target bone not found: "+b);m.mix=this.getValue(y,"mix",1),m.softness=this.getValue(y,"softness",0)*n,m.bendDirection=this.getValue(y,"bendPositive",!0)?1:-1,m.compress=this.getValue(y,"compress",!1),m.stretch=this.getValue(y,"stretch",!1),m.uniform=this.getValue(y,"uniform",!1),r.ikConstraints.push(m)}if(i.transform)for(l=0;l<i.transform.length;l++){y=i.transform[l];(m=new it(y.name)).order=this.getValue(y,"order",0),m.skinRequired=this.getValue(y,"skin",!1);for(E=0;E<y.bones.length;E++){d=y.bones[E];if(null==(I=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);m.bones.push(I)}b=y.target;if(m.target=r.findBone(b),null==m.target)throw new Error("Transform constraint target bone not found: "+b);m.local=this.getValue(y,"local",!1),m.relative=this.getValue(y,"relative",!1),m.offsetRotation=this.getValue(y,"rotation",0),m.offsetX=this.getValue(y,"x",0)*n,m.offsetY=this.getValue(y,"y",0)*n,m.offsetScaleX=this.getValue(y,"scaleX",0),m.offsetScaleY=this.getValue(y,"scaleY",0),m.offsetShearY=this.getValue(y,"shearY",0),m.rotateMix=this.getValue(y,"rotateMix",1),m.translateMix=this.getValue(y,"translateMix",1),m.scaleMix=this.getValue(y,"scaleMix",1),m.shearMix=this.getValue(y,"shearMix",1),r.transformConstraints.push(m)}if(i.path)for(l=0;l<i.path.length;l++){y=i.path[l];(m=new K(y.name)).order=this.getValue(y,"order",0),m.skinRequired=this.getValue(y,"skin",!1);for(E=0;E<y.bones.length;E++){d=y.bones[E];if(null==(I=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);m.bones.push(I)}b=y.target;if(m.target=r.findSlot(b),null==m.target)throw new Error("Path target slot not found: "+b);m.positionMode=t.positionModeFromString(this.getValue(y,"positionMode","percent")),m.spacingMode=t.spacingModeFromString(this.getValue(y,"spacingMode","length")),m.rotateMode=t.rotateModeFromString(this.getValue(y,"rotateMode","tangent")),m.offsetRotation=this.getValue(y,"rotation",0),m.position=this.getValue(y,"position",0),m.positionMode==a.T.Fixed&&(m.position*=n),m.spacing=this.getValue(y,"spacing",0),m.spacingMode!=B.Length&&m.spacingMode!=B.Fixed||(m.spacing*=n),m.rotateMix=this.getValue(y,"rotateMix",1),m.translateMix=this.getValue(y,"translateMix",1),r.pathConstraints.push(m)}if(i.skins)for(l=0;l<i.skins.length;l++){var x=i.skins[l],w=new st(x.name);if(x.bones)for(var M=0;M<x.bones.length;M++){var I;if(null==(I=r.findBone(x.bones[M])))throw new Error("Skin bone not found: "+x.bones[l]);w.bones.push(I)}if(x.ik)for(M=0;M<x.ik.length;M++){if(null==(S=r.findIkConstraint(x.ik[M])))throw new Error("Skin IK constraint not found: "+x.ik[l]);w.constraints.push(S)}if(x.transform)for(M=0;M<x.transform.length;M++){if(null==(S=r.findTransformConstraint(x.transform[M])))throw new Error("Skin transform constraint not found: "+x.transform[l]);w.constraints.push(S)}if(x.path)for(M=0;M<x.path.length;M++){var S;if(null==(S=r.findPathConstraint(x.path[M])))throw new Error("Skin path constraint not found: "+x.path[l]);w.constraints.push(S)}for(var f in x.attachments){var T=r.findSlot(f);if(null==T)throw new Error("Slot not found: "+f);var A=x.attachments[f];for(var R in A){var C=this.readAttachment(A[R],w,T.index,R,r);null!=C&&w.setAttachment(T.index,R,C)}}r.skins.push(w),"default"==w.name&&(r.defaultSkin=w)}l=0;for(var V=this.linkedMeshes.length;l<V;l++){var k=this.linkedMeshes[l];if(null==(w=null==k.skin?r.defaultSkin:r.findSkin(k.skin)))throw new Error("Skin not found: "+k.skin);var P=w.getAttachment(k.slotIndex,k.parent);if(null==P)throw new Error("Parent mesh not found: "+k.parent);k.mesh.deformAttachment=k.inheritDeform?P:k.mesh,k.mesh.setParentMesh(P)}if(this.linkedMeshes.length=0,i.events)for(var F in i.events){var N=i.events[F];(m=new Z(F)).intValue=this.getValue(N,"int",0),m.floatValue=this.getValue(N,"float",0),m.stringValue=this.getValue(N,"string",""),m.audioPath=this.getValue(N,"audio",null),null!=m.audioPath&&(m.volume=this.getValue(N,"volume",1),m.balance=this.getValue(N,"balance",0)),r.events.push(m)}if(i.animations)for(var Y in i.animations){var _=i.animations[Y];this.readAnimation(_,Y,r)}return r},t.prototype.readAttachment=function(t,e,n,r,i){var o=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var s=this.getValue(t,"path",r),l=this.attachmentLoader.newRegionAttachment(e,r,s);return null==l?null:(l.path=s,l.x=this.getValue(t,"x",0)*o,l.y=this.getValue(t,"y",0)*o,l.scaleX=this.getValue(t,"scaleX",1),l.scaleY=this.getValue(t,"scaleY",1),l.rotation=this.getValue(t,"rotation",0),l.width=t.width*o,l.height=t.height*o,null!=(b=this.getValue(t,"color",null))&&l.color.setFromString(b),l);case"boundingbox":var h=this.attachmentLoader.newBoundingBoxAttachment(e,r);return null==h?null:(this.readVertices(t,h,t.vertexCount<<1),null!=(b=this.getValue(t,"color",null))&&h.color.setFromString(b),h);case"mesh":case"linkedmesh":s=this.getValue(t,"path",r);var c=this.attachmentLoader.newMeshAttachment(e,r,s);if(null==c)return null;c.path=s,null!=(b=this.getValue(t,"color",null))&&c.color.setFromString(b),c.width=this.getValue(t,"width",0)*o,c.height=this.getValue(t,"height",0)*o;var u=this.getValue(t,"parent",null);if(null!=u)return this.linkedMeshes.push(new dt(c,this.getValue(t,"skin",null),n,u,this.getValue(t,"deform",!0))),c;var f=t.uvs;return this.readVertices(t,c,f.length),c.triangles=t.triangles,c.regionUVs=new Float32Array(f),c.edges=this.getValue(t,"edges",null),c.hullLength=2*this.getValue(t,"hull",0),c;case"path":if(null==(s=this.attachmentLoader.newPathAttachment(e,r)))return null;s.closed=this.getValue(t,"closed",!1),s.constantSpeed=this.getValue(t,"constantSpeed",!0);var d=t.vertexCount;this.readVertices(t,s,d<<1);for(var p=a.cQ.newArray(d/3,0),m=0;m<t.lengths.length;m++)p[m]=t.lengths[m]*o;return s.lengths=p,null!=(b=this.getValue(t,"color",null))&&s.color.setFromString(b),s;case"point":var g=this.attachmentLoader.newPointAttachment(e,r);return null==g?null:(g.x=this.getValue(t,"x",0)*o,g.y=this.getValue(t,"y",0)*o,g.rotation=this.getValue(t,"rotation",0),null!=(b=this.getValue(t,"color",null))&&g.color.setFromString(b),g);case"clipping":var v=this.attachmentLoader.newClippingAttachment(e,r);if(null==v)return null;var y=this.getValue(t,"end",null);if(null!=y){var E=i.findSlot(y);if(null==E)throw new Error("Clipping end slot not found: "+y);v.endSlot=E}var b;d=t.vertexCount;return this.readVertices(t,v,d<<1),null!=(b=this.getValue(t,"color",null))&&v.color.setFromString(b),v}return null},t.prototype.readVertices=function(t,e,n){var r=this.scale;e.worldVerticesLength=n;var i=t.vertices;if(n!=i.length){var o=new Array,s=new Array;for(u=0,f=i.length;u<f;){var l=i[u++];s.push(l);for(var h=u+4*l;u<h;u+=4)s.push(i[u]),o.push(i[u+1]*r),o.push(i[u+2]*r),o.push(i[u+3])}e.bones=s,e.vertices=a.cQ.toFloatArray(o)}else{var c=a.cQ.toFloatArray(i);if(1!=r)for(var u=0,f=i.length;u<f;u++)c[u]*=r;e.vertices=c}},t.prototype.readAnimation=function(t,e,n){var r=this.scale,i=new Array,o=0;if(t.slots)for(var s in t.slots){var l=t.slots[s];if(-1==(pt=n.findSlotIndex(s)))throw new Error("Slot not found: "+s);for(var h in l){var c=l[h];if("attachment"==h){(x=new R(c.length)).slotIndex=pt;for(var u=0,f=0;f<c.length;f++){var d=c[f];x.setFrame(u++,this.getValue(d,"time",0),d.name)}i.push(x),o=Math.max(o,x.frames[x.getFrameCount()-1])}else if("color"==h){(x=new T(c.length)).slotIndex=pt;for(u=0,f=0;f<c.length;f++){d=c[f];var p=new a.Il;p.setFromString(d.color||"ffffffff"),x.setFrame(u,this.getValue(d,"time",0),p.r,p.g,p.b,p.a),this.readCurve(d,x,u),u++}i.push(x),o=Math.max(o,x.frames[(x.getFrameCount()-1)*T.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+s+")");(x=new A(c.length)).slotIndex=pt;for(u=0,f=0;f<c.length;f++){d=c[f];var m=new a.Il,g=new a.Il;m.setFromString(d.light),g.setFromString(d.dark),x.setFrame(u,this.getValue(d,"time",0),m.r,m.g,m.b,m.a,g.r,g.g,g.b),this.readCurve(d,x,u),u++}i.push(x),o=Math.max(o,x.frames[(x.getFrameCount()-1)*A.ENTRIES])}}}if(t.bones)for(var v in t.bones){var y=t.bones[v],b=n.findBoneIndex(v);if(-1==b)throw new Error("Bone not found: "+v);for(var h in y){c=y[h];if("rotate"===h){(x=new w(c.length)).boneIndex=b;for(u=0,f=0;f<c.length;f++){d=c[f];x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"angle",0)),this.readCurve(d,x,u),u++}i.push(x),o=Math.max(o,x.frames[(x.getFrameCount()-1)*w.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+v+")");var x=null,C=1,O=0;"scale"===h?(x=new I(c.length),O=1):"shear"===h?x=new S(c.length):(x=new M(c.length),C=r),x.boneIndex=b;for(u=0,f=0;f<c.length;f++){d=c[f];var D=this.getValue(d,"x",O),q=this.getValue(d,"y",O);x.setFrame(u,this.getValue(d,"time",0),D*C,q*C),this.readCurve(d,x,u),u++}i.push(x),o=Math.max(o,x.frames[(x.getFrameCount()-1)*M.ENTRIES])}}}if(t.ik)for(var L in t.ik){var W=t.ik[L],Q=n.findIkConstraint(L);(x=new F(W.length)).ikConstraintIndex=n.ikConstraints.indexOf(Q);for(u=0,f=0;f<W.length;f++){d=W[f];x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"mix",1),this.getValue(d,"softness",0)*r,this.getValue(d,"bendPositive",!0)?1:-1,this.getValue(d,"compress",!1),this.getValue(d,"stretch",!1)),this.readCurve(d,x,u),u++}i.push(x),o=Math.max(o,x.frames[(x.getFrameCount()-1)*F.ENTRIES])}if(t.transform)for(var L in t.transform){W=t.transform[L],Q=n.findTransformConstraint(L);(x=new N(W.length)).transformConstraintIndex=n.transformConstraints.indexOf(Q);for(u=0,f=0;f<W.length;f++){d=W[f];x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1),this.getValue(d,"scaleMix",1),this.getValue(d,"shearMix",1)),this.readCurve(d,x,u),u++}i.push(x),o=Math.max(o,x.frames[(x.getFrameCount()-1)*N.ENTRIES])}if(t.path)for(var L in t.path){W=t.path[L];var U=n.findPathConstraintIndex(L);if(-1==U)throw new Error("Path constraint not found: "+L);var H=n.pathConstraints[U];for(var h in W){c=W[h];if("position"===h||"spacing"===h){x=null,C=1;"spacing"===h?(x=new _(c.length),H.spacingMode!=B.Length&&H.spacingMode!=B.Fixed||(C=r)):(x=new Y(c.length),H.positionMode==a.T.Fixed&&(C=r)),x.pathConstraintIndex=U;for(u=0,f=0;f<c.length;f++){d=c[f];x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,h,0)*C),this.readCurve(d,x,u),u++}i.push(x),o=Math.max(o,x.frames[(x.getFrameCount()-1)*Y.ENTRIES])}else if("mix"===h){(x=new X(c.length)).pathConstraintIndex=U;for(u=0,f=0;f<c.length;f++){d=c[f];x.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1)),this.readCurve(d,x,u),u++}i.push(x),o=Math.max(o,x.frames[(x.getFrameCount()-1)*X.ENTRIES])}}}if(t.deform)for(var j in t.deform){var Z=t.deform[j],z=n.findSkin(j);if(null!=z)for(var s in Z){l=Z[s];if(-1==(pt=n.findSlotIndex(s)))throw new Error("Slot not found: "+l.name);for(var h in l){c=l[h];var J=z.getAttachment(pt,h);if(null==J)throw new Error("Deform attachment not found: "+c.name);var K=null!=J.bones,$=J.vertices,tt=K?$.length/3*2:$.length;(x=new V(c.length)).slotIndex=pt,x.attachment=J;u=0;for(var et=0;et<c.length;et++){d=c[et];var nt=void 0,at=this.getValue(d,"vertices",null);if(null==at)nt=K?a.cQ.newFloatArray(tt):$;else{nt=a.cQ.newFloatArray(tt);var rt=this.getValue(d,"offset",0);if(a.cQ.arrayCopy(at,0,nt,rt,at.length),1!=r)for(var it=(f=rt)+at.length;f<it;f++)nt[f]*=r;if(!K)for(f=0;f<tt;f++)nt[f]+=$[f]}x.setFrame(u,this.getValue(d,"time",0),nt),this.readCurve(d,x,u),u++}i.push(x),o=Math.max(o,x.frames[x.getFrameCount()-1])}}else if(a.Xd.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+j)}var ot=t.drawOrder;if(null==ot&&(ot=t.draworder),null!=ot){x=new P(ot.length);var st=n.slots.length;for(u=0,et=0;et<ot.length;et++){var lt=ot[et],ht=null,ct=this.getValue(lt,"offsets",null);if(null!=ct){ht=a.cQ.newArray(st,-1);var ut=a.cQ.newArray(st-ct.length,0),ft=0,dt=0;for(f=0;f<ct.length;f++){var pt,mt=ct[f];if(-1==(pt=n.findSlotIndex(mt.slot)))throw new Error("Slot not found: "+mt.slot);for(;ft!=pt;)ut[dt++]=ft++;ht[ft+mt.offset]=ft++}for(;ft<st;)ut[dt++]=ft++;for(f=st-1;f>=0;f--)-1==ht[f]&&(ht[f]=ut[--dt])}x.setFrame(u++,this.getValue(lt,"time",0),ht)}i.push(x),o=Math.max(o,x.frames[x.getFrameCount()-1])}if(t.events){for(x=new k(t.events.length),u=0,f=0;f<t.events.length;f++){var gt=t.events[f],vt=n.findEvent(gt.name);if(null==vt)throw new Error("Event not found: "+gt.name);var yt=new G(a.cQ.toSinglePrecision(this.getValue(gt,"time",0)),vt);yt.intValue=this.getValue(gt,"int",vt.intValue),yt.floatValue=this.getValue(gt,"float",vt.floatValue),yt.stringValue=this.getValue(gt,"string",vt.stringValue),null!=yt.data.audioPath&&(yt.volume=this.getValue(gt,"volume",1),yt.balance=this.getValue(gt,"balance",0)),x.setFrame(u++,yt)}i.push(x),o=Math.max(o,x.frames[x.getFrameCount()-1])}if(isNaN(o))throw new Error("Error while parsing animation, duration is NaN");n.animations.push(new E(e,i,o))},t.prototype.readCurve=function(t,e,n){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(n);else{var a=t.curve;e.setCurve(n,a,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},t.prototype.getValue=function(t,e,n){return void 0!==t[e]?t[e]:n},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return i.T$.NORMAL;if("additive"==t)return i.T$.ADD;if("multiply"==t)return i.T$.MULTIPLY;if("screen"==t)return i.T$.SCREEN;throw new Error("Unknown blend mode: "+t)},t.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return a.T.Fixed;if("percent"==t)return a.T.Percent;throw new Error("Unknown position mode: "+t)},t.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return B.Length;if("fixed"==t)return B.Fixed;if("percent"==t)return B.Percent;throw new Error("Unknown position mode: "+t)},t.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return a.YK.Tangent;if("chain"==t)return a.YK.Chain;if("chainscale"==t)return a.YK.ChainScale;throw new Error("Unknown rotate mode: "+t)},t.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return a.Qe.Normal;if("onlytranslation"==t)return a.Qe.OnlyTranslation;if("norotationorreflection"==t)return a.Qe.NoRotationOrReflection;if("noscale"==t)return a.Qe.NoScale;if("noscaleorreflection"==t)return a.Qe.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},t}(),dt=function(t,e,n,a,r){this.mesh=t,this.skin=e,this.slotIndex=n,this.parent=a,this.inheritDeform=r},pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.createSkeleton=function(t){this.skeleton=new nt(t),this.skeleton.updateWorldTransform(),this.stateData=new W(t),this.state=new O(this.stateData)},e}(a.Ww)}}]);